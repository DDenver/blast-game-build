window.__require=function t(e,o,n){function r(s,c){if(!o[s]){if(!e[s]){var a=s.split("/");if(a=a[a.length-1],!e[a]){var l="function"==typeof __require&&__require;if(!c&&l)return l(a,!0);if(i)return i(a,!0);throw new Error("Cannot find module '"+s+"'")}s=a}var u=o[s]={exports:{}};e[s][0].call(u.exports,function(t){return r(e[s][1][t]||t)},u,u.exports,t,e,o,n)}return o[s].exports}for(var i="function"==typeof __require&&__require,s=0;s<n.length;s++)r(n[s]);return r}({AnchorComponent:[function(t,e,o){"use strict";cc._RF.push(e,"2e4b2EAAVlLsoUMDz/HMgmf","AnchorComponent");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Base/SimpleTransformComponent"),c=cc._decorator,a=c.ccclass,l=c.property,u=function(){function t(){this.anchor=cc.v2(.5,.5)}return t.prototype.applyTransform=function(t){t.setAnchorPoint(this.anchor)},t.prototype.getData=function(){return{anchor:this.anchor.clone()}},t.prototype.applyData=function(t){this.anchor=t.anchor},i([l(cc.Vec2)],t.prototype,"anchor",void 0),i([a("AnchorConfiguration")],t)}(),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.configuration=null,e}return r(e,t),e.prototype.execute=function(t){this.configuration&&this.configuration.applyTransform(t)},e.prototype.reset=function(t){this.configuration=t?new u:null},i([l({type:u,serializable:!0,visible:function(){return this.isActive}})],e.prototype,"configuration",void 0),i([a("AnchorComponent")],e)}(s.default);o.default=p,cc._RF.pop()},{"../Base/SimpleTransformComponent":"SimpleTransformComponent"}],BoosterConfig:[function(t,e,o){"use strict";cc._RF.push(e,"b4c38uStahA3It42/wtwo27","BoosterConfig");var n=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.BoosterConfig=void 0;var r=t("./BoosterTypes"),i=cc._decorator,s=i.ccclass,c=i.property,a=function(){function t(){this.type=r.BoosterTypes.Boomb,this.icon=null,this.startCount=0,this.radius=0}return n([c({type:cc.Enum(r.BoosterTypes)})],t.prototype,"type",void 0),n([c({type:cc.SpriteFrame})],t.prototype,"icon",void 0),n([c({type:cc.Integer})],t.prototype,"startCount",void 0),n([c({type:cc.Integer,visible:!1})],t.prototype,"radius",void 0),n([s("BoosterConfig")],t)}();o.BoosterConfig=a,cc._RF.pop()},{"./BoosterTypes":"BoosterTypes"}],BoosterInput:[function(t,e,o){"use strict";cc._RF.push(e,"867c2Ph4LhN+ITrvW0wsblh","BoosterInput"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../Plugins/Input/InputManager"),r=t("../Plugins/Input/InputSources"),i=t("../Plugins/Input/InputTypes"),s=function(){function t(t){this.booster=null,this.isEnable=!1,this.booster=t,n.default.getInstance().on(i.default.Down,this.onInput,this)}return t.prototype.enable=function(){this.isEnable=!0},t.prototype.disable=function(){this.isEnable=!1},t.prototype.onInput=function(t){t.touchSource===r.default.BoosterButton&&this.isEnable&&t.eventTouch.target instanceof cc.Node&&this.booster.node===t.eventTouch.target&&this.booster.onTap()},t}();o.default=s,cc._RF.pop()},{"../Plugins/Input/InputManager":"InputManager","../Plugins/Input/InputSources":"InputSources","../Plugins/Input/InputTypes":"InputTypes"}],BoosterManager:[function(t,e,o){"use strict";cc._RF.push(e,"4fba9m+6cZPdLyhJq6sGsLb","BoosterManager");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./Booster"),c=t("./BoosterConfig"),a=t("./BoosterTypes"),l=cc._decorator,u=l.ccclass,p=l.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.boosters=[],e.boosterIconsConfigs=[],e._activeBoosterPayload=null,e.activeBooster=null,e}return r(e,t),Object.defineProperty(e.prototype,"activeBoosterPayload",{get:function(){return this._activeBoosterPayload},enumerable:!1,configurable:!0}),e.prototype.init=function(t){var e=this;this.boosters.forEach(function(o,n){var r={type:t[n].type,icon:e.boosterIconsConfigs.find(function(e){return e.type===t[n].type}).icon,startCount:t[n].startCount,radius:t[n].radius};o.init(e,r)})},e.prototype.enable=function(){this.toggleEnableBoosters(!0)},e.prototype.disable=function(){this.toggleEnableBoosters(!1)},e.prototype.activateBooster=function(t){this._activeBoosterPayload=this.getBoosterPayload(t),this.activeBooster=t,this.toggleEnableBoosters(!1)},e.prototype.useActiveBooster=function(){this._activeBoosterPayload=null,this.toggleEnableBoosters(!0),this.activeBooster.use()},e.prototype.toggleEnableBoosters=function(t){this.boosters.forEach(function(e){t?e.enable():e.disable()})},e.prototype.getBoosterPayload=function(t){var e={type:t.config.type};switch(t.config.type){case a.BoosterTypes.Boomb:e.radius=4;break;case a.BoosterTypes.MegaBoomb:e.radius=-1}return e},i([p(s.default)],e.prototype,"boosters",void 0),i([p(c.BoosterConfig)],e.prototype,"boosterIconsConfigs",void 0),i([u],e)}(cc.Component);o.default=f,cc._RF.pop()},{"./Booster":"Booster","./BoosterConfig":"BoosterConfig","./BoosterTypes":"BoosterTypes"}],BoosterRenderer:[function(t,e,o){"use strict";cc._RF.push(e,"87fb0dUc9hGQKn3DFDdU4DB","BoosterRenderer");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Enums/EasingType"),c=cc._decorator,a=c.ccclass,l=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.counter=null,e.easing=s.default.quadInOut,e.tween=null,e.tweenDuration=.2,e}return r(e,t),e.prototype.init=function(t,e){this.icon.spriteFrame=t,this.setCount(e)},e.prototype.setCount=function(t){this.counter.string=""+t},e.prototype.activate=function(){this.playScaleTween(1.3,127)},e.prototype.deactivate=function(){this.playScaleTween(1,255)},e.prototype.playScaleTween=function(t,e){this.tween&&this.tween.stop(),this.tween=cc.tween(this.icon.node).to(this.tweenDuration,{scale:t,opacity:e},{easing:cc.easing[s.default[this.easing]]}).start()},i([l(cc.Sprite)],e.prototype,"icon",void 0),i([l(cc.Label)],e.prototype,"counter",void 0),i([l({type:cc.Enum(s.default)})],e.prototype,"easing",void 0),i([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../Enums/EasingType":"EasingType"}],BoosterTypes:[function(t,e,o){"use strict";cc._RF.push(e,"044a2EQXBNMeoplUz2YKeBy","BoosterTypes"),Object.defineProperty(o,"__esModule",{value:!0}),o.BoosterTypes=void 0,function(t){t[t.None=0]="None",t[t.VerticalLineDestroy=1]="VerticalLineDestroy",t[t.HorizontalLineDestroy=2]="HorizontalLineDestroy",t[t.Boomb=3]="Boomb",t[t.MegaBoomb=4]="MegaBoomb",t[t.Swap=5]="Swap"}(o.BoosterTypes||(o.BoosterTypes={})),cc._RF.pop()},{}],Booster:[function(t,e,o){"use strict";cc._RF.push(e,"c6bael7JGxMO7E4O7gsEbL1","Booster");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./BoosterConfig"),c=t("./BoosterInput"),a=t("./BoosterRenderer"),l=cc._decorator,u=l.ccclass,p=l.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.config=null,e.manager=null,e.renderer=null,e.input=null,e}return r(e,t),e.prototype.init=function(t,e){this.manager=t,this.counter=e.startCount,this.config.startCount=e.startCount,this.config.type=e.type,this.renderer=this.node.getComponent(a.default),this.renderer.init(e.icon,this.counter),this.input=new c.default(this)},e.prototype.getCount=function(){return this.counter},e.prototype.enable=function(){this.input.enable()},e.prototype.disable=function(){this.input.disable()},e.prototype.use=function(){this.counter--,this.renderer.setCount(this.counter),this.renderer.deactivate()},e.prototype.onTap=function(){0!==this.counter&&(this.renderer.activate(),this.manager.activateBooster(this))},i([p(s.BoosterConfig)],e.prototype,"config",void 0),i([u],e)}(cc.Component);o.default=f,cc._RF.pop()},{"./BoosterConfig":"BoosterConfig","./BoosterInput":"BoosterInput","./BoosterRenderer":"BoosterRenderer"}],Button:[function(t,e,o){"use strict";cc._RF.push(e,"d62a1MGlRJHtLqf3GRVR+l7","Button");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Enums/EasingType"),c=t("../Plugins/Input/InputCatcher"),a=t("../Plugins/Input/InputManager"),l=t("../Plugins/Input/InputTypes"),u=cc._decorator,p=u.ccclass,f=u.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.holder=null,e.inputCatcher=null,e.tween=null,e.duration=.15,e}return r(e,t),e.prototype.onLoad=function(){this.inputCatcher=this.node.getComponent(c.default),a.default.getInstance().on(l.default.Down,this.onDown,this),a.default.getInstance().on(l.default.Up,this.onUp,this)},e.prototype.onDown=function(t){t.touchSource===this.inputCatcher.inputSource&&(this.tween&&this.tween.stop(),this.tween=cc.tween(this.holder||this.node).to(this.duration,{scale:.9},{easing:cc.easing[s.default.quadIn]}).start())},e.prototype.onUp=function(t){t.touchSource===this.inputCatcher.inputSource&&(this.tween&&this.tween.stop(),this.tween=cc.tween(this.holder||this.node).to(this.duration,{scale:1},{easing:cc.easing[s.default.quadOut]}).start())},i([f(cc.Node)],e.prototype,"holder",void 0),i([p],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../Enums/EasingType":"EasingType","../Plugins/Input/InputCatcher":"InputCatcher","../Plugins/Input/InputManager":"InputManager","../Plugins/Input/InputTypes":"InputTypes"}],CounterRenderer:[function(t,e,o){"use strict";cc._RF.push(e,"5f9a1uXrPZLKrWXSqZd/vXH","CounterRenderer");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,a=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labalValue=null,e}return r(e,t),e.prototype.setValue=function(t){this.labalValue.string=""+t},i([a(cc.Label)],e.prototype,"labalValue",void 0),i([c],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],Counter:[function(t,e,o){"use strict";cc._RF.push(e,"b24bf70XaJFaq77AWrvPKbe","Counter");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./CounterRenderer"),c=cc._decorator,a=c.ccclass,l=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.renderer=null,e.startValue=0,e.currentValue=0,e.incrementValue=0,e.threshold=0,e.callback=null,e._thresholdReached=!1,e}return r(e,t),Object.defineProperty(e.prototype,"thresholdReached",{get:function(){return this._thresholdReached},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.renderer=this.node.getComponent(s.default)},e.prototype.init=function(t){this.startValue=t.startValue,this.currentValue=t.startValue,this.incrementValue=t.incrementValue,this.threshold=null==t?void 0:t.threshold,this.callback=null==t?void 0:t.callback,this.renderer.setValue(this.currentValue),this._thresholdReached=!1},e.prototype.updateValue=function(t){if(void 0===t&&(t=1),this.currentValue+=this.incrementValue*t,this.callback){var e=this.threshold-this.startValue;(e>0&&this.currentValue>=this.threshold||e<0&&this.currentValue<=this.threshold)&&(this._thresholdReached=!0,this.callback())}this.renderer.setValue(this.currentValue)},e.prototype.getCurrentValue=function(){return this.currentValue},i([a],e)}(cc.Component));o.default=l,cc._RF.pop()},{"./CounterRenderer":"CounterRenderer"}],EasingType:[function(t,e,o){"use strict";var n;cc._RF.push(e,"a465f75P9pMIIDar1ZQ7EGL","EasingType"),Object.defineProperty(o,"__esModule",{value:!0}),function(t){t[t.constant=0]="constant",t[t.linear=1]="linear",t[t.fade=2]="fade",t[t.smooth=3]="smooth",t[t.backIn=4]="backIn",t[t.backInOut=5]="backInOut",t[t.backOut=6]="backOut",t[t.bounceIn=7]="bounceIn",t[t.bounceInOut=8]="bounceInOut",t[t.bounceOut=9]="bounceOut",t[t.circIn=10]="circIn",t[t.circInOut=11]="circInOut",t[t.circOut=12]="circOut",t[t.cubicIn=13]="cubicIn",t[t.cubicInOut=14]="cubicInOut",t[t.cubicOut=15]="cubicOut",t[t.elasticIn=16]="elasticIn",t[t.elasticInOut=17]="elasticInOut",t[t.elasticOut=18]="elasticOut",t[t.expoIn=19]="expoIn",t[t.expoInOut=20]="expoInOut",t[t.expoOut=21]="expoOut",t[t.quadIn=22]="quadIn",t[t.quadInOut=23]="quadInOut",t[t.quadOut=24]="quadOut",t[t.quartIn=25]="quartIn",t[t.quartInOut=26]="quartInOut",t[t.quartOut=27]="quartOut",t[t.quintIn=28]="quintIn",t[t.quintInOut=29]="quintInOut",t[t.quintOut=30]="quintOut",t[t.sineIn=31]="sineIn",t[t.sineInOut=32]="sineInOut",t[t.sineOut=33]="sineOut"}(n||(n={})),o.default=n,cc._RF.pop()},{}],Events:[function(t,e,o){"use strict";var n;cc._RF.push(e,"1a351Sq4e5E8LkcDQIaO7+m","Events"),Object.defineProperty(o,"__esModule",{value:!0}),function(t){t[t.WINDOW_RESIZED=0]="WINDOW_RESIZED",t[t.INPUT=1]="INPUT",t[t.NEW_GAME=2]="NEW_GAME",t[t.RESTART_GAME=3]="RESTART_GAME",t[t.COMPLETE_LEVEL=4]="COMPLETE_LEVEL",t[t.FAIL_LEVEL=5]="FAIL_LEVEL",t[t.LEAVE_LEVEL=6]="LEAVE_LEVEL",t[t.NEXT_LEVEL=7]="NEXT_LEVEL",t[t.MAIN_MENU=8]="MAIN_MENU",t[t.START_LEVEL=9]="START_LEVEL",t[t.SHOW_RESULT=10]="SHOW_RESULT",t[t.UPDATE_SCORE=11]="UPDATE_SCORE",t[t.STEP_COMPLETED=12]="STEP_COMPLETED",t[t.TILE_REMOVED=13]="TILE_REMOVED"}(n||(n={})),o.default=n,cc._RF.pop()},{}],FieldCreator:[function(t,e,o){"use strict";cc._RF.push(e,"e63631FwnFIiJ6G1t+JOu1G","FieldCreator");var n=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{a(n.next(t))}catch(e){i(e)}}function c(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,c)}a((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return a([t,e])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},i=this&&this.__spreadArrays||function(){for(var t=0,e=0,o=arguments.length;e<o;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<o;e++)for(var i=arguments[e],s=0,c=i.length;s<c;s++,r++)n[r]=i[s];return n};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Enums/Events"),c=t("../Tile/TileConstants"),a=t("./FieldUtils"),l=function(){function t(t){this.map=[],this.field=t}return t.prototype.crateField=function(){this.map=[];for(var t=0;t<a.default.instance.fieldSize.height;t++){this.map.push([]);for(var e=0;e<a.default.instance.fieldSize.width;e++){var o=this.field.tilesCreator.getTileColorDestroy(!0),n=a.default.instance.getMapToWorldPos(new cc.Vec2(e,t));o.setPosition(n),o.show(),this.map[t].push(o)}}},t.prototype.getTileByCoords=function(t){return!t||t.x<0||t.y<0||t.x>=a.default.instance.fieldSize.width||t.y>=a.default.instance.fieldSize.height?null:this.map[t.y][t.x]},t.prototype.getNeighbors=function(t){var e=this,o=a.default.instance.getPositionOnMap(t.getPosition()),n=[new cc.Vec2(0,1),new cc.Vec2(1,0),new cc.Vec2(0,-1),new cc.Vec2(-1,0)],r=[];return n.forEach(function(t){var n=e.getTileByCoords(o.clone().add(t));n&&!n.needMatch&&r.push(n)}),r},t.prototype.getAllTiles=function(){for(var t=[],e=0;e<this.map.length;e++)t.push.apply(t,this.map[e]);return t},t.prototype.getRow=function(t){return i(this.map[t])},t.prototype.getCol=function(t){for(var e=[],o=0;o<a.default.instance.fieldSize.height;o++)e.push(this.map[o][t]);return e},t.prototype.removeTiles=function(t){var e=this;cc.systemEvent.emit(s.default.UPDATE_SCORE.toString(),t.length),t.forEach(function(t){e.removeTile(t)})},t.prototype.updateMap=function(){return n(this,void 0,Promise,function(){var t,e,o,n,i,s,c,l,u,p;return r(this,function(r){switch(r.label){case 0:for(t=0,e=0;e<a.default.instance.fieldSize.width;e++){for(o=0,n=a.default.instance.fieldSize.height-1;n>=0;n--)(i=this.map[n][e])?(s=n+o,this.map[n][e]=null,p=Math.min(o*this.field.fallSpeed,this.field.fallTimeLimit),t=Math.max(p,t),this.fallTile(i,new cc.Vec2(e,s),p,this.field.easingFall)):o++;for(c=1;c<=o;c++)l=this.field.tilesCreator.getTileColorDestroy(!0),u=a.default.instance.getMapToWorldPos(new cc.Vec2(e,-c)),l.setPosition(u),l.show(!1),p=Math.min(o*this.field.fallSpeed,this.field.fallTimeLimit),t=Math.max(p,t),this.fallTile(l,new cc.Vec2(e,o-c),p,this.field.easingFall)}return[4,this.field.waitTimer(t)];case 1:return r.sent(),[2]}})})},t.prototype.addTileOnMap=function(t,e,o){var n,r=null===o;switch(e){case c.TileAbilityTypes.AreaDestroy:n=this.field.tilesCreator.getTileAreaDestroy(r,o);break;case c.TileAbilityTypes.LineDestroy:n=this.field.tilesCreator.getTileLineDestroy(r,o)}n.setPosition(a.default.instance.getMapToWorldPos(t)),n.show(),this.map[t.y][t.x]=n},t.prototype.swapTiles=function(t,e){return n(this,void 0,Promise,function(){var o,n,i,s;return r(this,function(r){switch(r.label){case 0:return o=t.getPosition(),n=e.getPosition(),i=a.default.instance.getPositionOnMap(o),s=a.default.instance.getPositionOnMap(n),this.map[i.y][i.x]=e,this.map[s.y][s.x]=t,t.swap(n),[4,e.swap(o)];case 1:return r.sent(),[2]}})})},t.prototype.fallTile=function(t,e,o,n){var r=a.default.instance.getMapToWorldPos(e);t.fallDown(r,o,n),this.map[e.y][e.x]=t},t.prototype.removeTile=function(t){if(t){var e=a.default.instance.getPositionOnMap(t.getPosition());this.map[e.y][e.x]=null,t.remove()}},t}();o.default=l,cc._RF.pop()},{"../Enums/Events":"Events","../Tile/TileConstants":"TileConstants","./FieldUtils":"FieldUtils"}],FieldInput:[function(t,e,o){"use strict";cc._RF.push(e,"9976ed9j41AQJezU/CMi7m/","FieldInput"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../Plugins/Input/InputManager"),r=t("../Plugins/Input/InputSources"),i=t("../Plugins/Input/InputTypes"),s=t("./FieldUtils"),c=function(){function t(t){this.field=null,this.isEnable=!1,this.field=t}return t.prototype.enable=function(){this.isEnable=!0,n.default.getInstance().on(i.default.Down,this.onInput,this)},t.prototype.disable=function(){this.isEnable=!1,n.default.getInstance().off(i.default.Down,this.onInput,this)},t.prototype.init=function(){n.default.getInstance().on(i.default.Down,this.onInput,this)},t.prototype.onInput=function(t){if(this.isEnable&&t.touchSource===r.default.Field){var e=t.eventTouch.getLocation(),o=s.default.instance.getTouchOnMap(e),n=this.field.fieldCreator.getTileByCoords(o);n&&this.field.tapToTile(n)}},t}();o.default=c,cc._RF.pop()},{"../Plugins/Input/InputManager":"InputManager","../Plugins/Input/InputSources":"InputSources","../Plugins/Input/InputTypes":"InputTypes","./FieldUtils":"FieldUtils"}],FieldStateAreaDestroy:[function(t,e,o){"use strict";cc._RF.push(e,"4dd7czgY6ROtrnO4ZUn3zsg","FieldStateAreaDestroy");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{a(n.next(t))}catch(e){i(e)}}function c(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,c)}a((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return a([t,e])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../Booster/BoosterTypes"),a=t("../../Enums/Events"),l=t("../../Tile/TileConstants"),u=t("./FieldState"),p=t("./FieldStateFallTiles"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.tapToTile=function(){},e.prototype.enterToState=function(){return i(this,void 0,Promise,function(){return s(this,function(t){switch(t.label){case 0:switch(this.getDestroyType()){case l.AreaDestroy.Default:return[3,1];case l.AreaDestroy.All:return[3,3]}return[3,4];case 1:return[4,this.removeArea(this.getRadius())];case 2:return t.sent(),[3,4];case 3:return this.field.fieldCreator.removeTiles(this.field.fieldCreator.getAllTiles()),[3,4];case 4:return this.field.focusTile=null,this.field.boosterManager.activeBoosterPayload&&this.field.boosterManager.useActiveBooster(),[4,this.field.waitTimer(.25)];case 5:return t.sent(),cc.systemEvent.emit(a.default.STEP_COMPLETED.toString()),this.field.setState(new p.default(this.field)),[2]}})})},e.prototype.removeArea=function(t){return i(this,void 0,Promise,function(){var e,o,n,r;return s(this,function(i){switch(i.label){case 0:for(e=[],r=0;r<t;r++){if(o=[],0===r)o.push.apply(o,this.getNeighbors(this.field.focusTile));else for(n=0;n<e[r-1].length;n++)o.push.apply(o,this.getNeighbors(e[r-1][n]));e.push(o)}r=0,i.label=1;case 1:return r<e.length?[4,this.field.waitTimer(.025)]:[3,4];case 2:i.sent(),this.field.fieldCreator.removeTiles(e[r]),i.label=3;case 3:return r++,[3,1];case 4:return[2]}})})},e.prototype.getNeighbors=function(t){var e=this.field.fieldCreator.getNeighbors(t);return e.forEach(function(t){return t.needMatch=!0}),e},e.prototype.getDestroyType=function(){return this.field.boosterManager.activeBoosterPayload&&this.field.boosterManager.activeBoosterPayload.type===c.BoosterTypes.Boomb||this.field.focusTile.config.typeDestroy===l.AreaDestroy.Default?l.AreaDestroy.Default:this.field.boosterManager.activeBoosterPayload&&this.field.boosterManager.activeBoosterPayload.type===c.BoosterTypes.MegaBoomb||this.field.focusTile.config.typeDestroy===l.AreaDestroy.All?l.AreaDestroy.All:l.AreaDestroy.Default},e.prototype.getRadius=function(){return this.field.boosterManager.activeBoosterPayload?this.field.boosterManager.activeBoosterPayload.radius:this.field.focusTile.config.radius},e}(u.default);o.default=f,cc._RF.pop()},{"../../Booster/BoosterTypes":"BoosterTypes","../../Enums/Events":"Events","../../Tile/TileConstants":"TileConstants","./FieldState":"FieldState","./FieldStateFallTiles":"FieldStateFallTiles"}],FieldStateCreation:[function(t,e,o){"use strict";cc._RF.push(e,"e4924IPNcROz6kfcGg5b3oQ","FieldStateCreation");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{a(n.next(t))}catch(e){i(e)}}function c(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,c)}a((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return a([t,e])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./FieldState"),a=t("./FiledStateWaiting"),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.tapToTile=function(){},e.prototype.enterToState=function(){return i(this,void 0,Promise,function(){return s(this,function(t){switch(t.label){case 0:return this.field.fieldCreator.crateField(),[4,this.field.waitTimer(.5)];case 1:return t.sent(),this.field.fieldInput.enable(),this.field.setState(new a.default(this.field)),[2]}})})},e}(c.default);o.default=l,cc._RF.pop()},{"./FieldState":"FieldState","./FiledStateWaiting":"FiledStateWaiting"}],FieldStateDestroyByColor:[function(t,e,o){"use strict";cc._RF.push(e,"4edc7kcIwlKkoNgquby8YH0","FieldStateDestroyByColor");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{a(n.next(t))}catch(e){i(e)}}function c(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,c)}a((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return a([t,e])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../Enums/Events"),a=t("../../Tile/TileConstants"),l=t("../FieldUtils"),u=t("./FieldState"),p=t("./FieldStateFallTiles"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.tapToTile=function(){},e.prototype.enterToState=function(){return i(this,void 0,Promise,function(){var t;return s(this,function(e){switch(e.label){case 0:return(t=this.field.getSiblingsByColor(this.field.focusTile)).length<=this.field.focusTile.config.matchCount-1?[4,this.field.focusTile.cantMatching()]:[3,2];case 1:return e.sent(),this.field.focusTile=null,[3,6];case 2:return t.length>=this.field.matchingCountForUpgrade?[4,this.upgradeTile(t)]:[3,4];case 3:return e.sent(),cc.systemEvent.emit(c.default.STEP_COMPLETED.toString()),[3,6];case 4:return[4,this.removeTiles(t)];case 5:e.sent(),cc.systemEvent.emit(c.default.STEP_COMPLETED.toString()),e.label=6;case 6:return this.field.setState(new p.default(this.field)),[2]}})})},e.prototype.upgradeTile=function(t){return i(this,void 0,Promise,function(){var e,o,n,r;return s(this,function(i){switch(i.label){case 0:return o=null,4===(n=t.length)?e=a.TileAbilityTypes.LineDestroy:n>4&&n<=6?(e=a.TileAbilityTypes.AreaDestroy,o=a.AreaDestroy.Default):n>6&&(e=a.TileAbilityTypes.AreaDestroy,o=a.AreaDestroy.All),r=l.default.instance.getPositionOnMap(this.field.focusTile.getPosition()),[4,this.removeTiles(t)];case 1:return i.sent(),this.field.addUpgradedTile(r,e,o),[2]}})})},e.prototype.removeTiles=function(t){return i(this,void 0,Promise,function(){return s(this,function(e){switch(e.label){case 0:return this.field.fieldCreator.removeTiles(t),this.field.focusTile=null,[4,this.field.waitTimer(.25)];case 1:return e.sent(),[2]}})})},e}(u.default);o.default=f,cc._RF.pop()},{"../../Enums/Events":"Events","../../Tile/TileConstants":"TileConstants","../FieldUtils":"FieldUtils","./FieldState":"FieldState","./FieldStateFallTiles":"FieldStateFallTiles"}],FieldStateFallTiles:[function(t,e,o){"use strict";cc._RF.push(e,"1771a3B9ZdKEoOSZ8UoI/xB","FieldStateFallTiles");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{a(n.next(t))}catch(e){i(e)}}function c(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,c)}a((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return a([t,e])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./FieldState"),a=t("./FieldStateMixTiles"),l=t("./FiledStateWaiting"),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.tapToTile=function(){},e.prototype.enterToState=function(){return i(this,void 0,Promise,function(){return s(this,function(t){switch(t.label){case 0:return[4,this.field.fieldCreator.updateMap()];case 1:return t.sent(),this.field.checkToMix()?this.field.setState(new a.default(this.field)):this.field.setState(new l.default(this.field)),[2]}})})},e}(c.default);o.default=u,cc._RF.pop()},{"./FieldState":"FieldState","./FieldStateMixTiles":"FieldStateMixTiles","./FiledStateWaiting":"FiledStateWaiting"}],FieldStateLineDestroy:[function(t,e,o){"use strict";cc._RF.push(e,"1e5d7bW441PSpSIkLpqO7P3","FieldStateLineDestroy");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{a(n.next(t))}catch(e){i(e)}}function c(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,c)}a((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return a([t,e])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../Booster/BoosterTypes"),a=t("../../Enums/Events"),l=t("../../Tile/TileConstants"),u=t("../FieldUtils"),p=t("./FieldState"),f=t("./FieldStateFallTiles"),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.tapToTile=function(){},e.prototype.enterToState=function(){return i(this,void 0,Promise,function(){var t,e;return s(this,function(o){switch(o.label){case 0:switch(e=u.default.instance.getPositionOnMap(this.field.focusTile.getPosition()),this.getDestroyType()){case l.LineDestroy.Horizontal:return[3,1];case l.LineDestroy.Vertical:return[3,3]}return[3,5];case 1:return t=this.field.fieldCreator.getRow(e.y),[4,this.removeLine(t,e.x)];case 2:return o.sent(),[3,5];case 3:return t=this.field.fieldCreator.getCol(e.x),[4,this.removeLine(t,e.y)];case 4:return o.sent(),[3,5];case 5:return this.field.focusTile=null,this.field.boosterManager.activeBoosterPayload&&this.field.boosterManager.useActiveBooster(),[4,this.field.waitTimer(.25)];case 6:return o.sent(),cc.systemEvent.emit(a.default.STEP_COMPLETED.toString()),this.field.setState(new f.default(this.field)),[2]}})})},e.prototype.removeLine=function(t,e){return i(this,void 0,Promise,function(){var o,n,r,i,c;return s(this,function(s){switch(s.label){case 0:o=0,n=.025,o=Math.round(Math.max(e,t.length-e))+1,r=0,s.label=1;case 1:return r<o?(0===r?this.field.fieldCreator.removeTiles([t[e]]):(i=t[e+r],c=t[e-r],i&&this.field.fieldCreator.removeTiles([i]),c&&this.field.fieldCreator.removeTiles([c])),[4,this.field.waitTimer(n)]):[3,4];case 2:s.sent(),s.label=3;case 3:return r++,[3,1];case 4:return[2]}})})},e.prototype.getDestroyType=function(){return this.field.boosterManager.activeBoosterPayload&&this.field.boosterManager.activeBoosterPayload.type===c.BoosterTypes.VerticalLineDestroy||this.field.focusTile.config.typeDestroy===l.LineDestroy.Vertical?l.LineDestroy.Vertical:(this.field.boosterManager.activeBoosterPayload&&this.field.boosterManager.activeBoosterPayload.type===c.BoosterTypes.HorizontalLineDestroy||(this.field.focusTile.config.typeDestroy,l.LineDestroy.Horizontal),l.LineDestroy.Horizontal)},e}(p.default);o.default=h,cc._RF.pop()},{"../../Booster/BoosterTypes":"BoosterTypes","../../Enums/Events":"Events","../../Tile/TileConstants":"TileConstants","../FieldUtils":"FieldUtils","./FieldState":"FieldState","./FieldStateFallTiles":"FieldStateFallTiles"}],FieldStateMixTiles:[function(t,e,o){"use strict";cc._RF.push(e,"21562IM0W5AObaOJ5utePzJ","FieldStateMixTiles");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{a(n.next(t))}catch(e){i(e)}}function c(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,c)}a((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return a([t,e])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./FieldState"),a=t("./FiledStateWaiting"),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.tapToTile=function(){},e.prototype.enterToState=function(){return i(this,void 0,Promise,function(){return s(this,function(t){switch(t.label){case 0:return this.field.fieldCreator.removeTiles(this.field.fieldCreator.getAllTiles()),[4,this.field.waitTimer(.3)];case 1:return t.sent(),this.field.fieldCreator.crateField(),[4,this.field.waitTimer(.3)];case 2:return t.sent(),this.field.setState(new a.default(this.field)),[2]}})})},e}(c.default);o.default=l,cc._RF.pop()},{"./FieldState":"FieldState","./FiledStateWaiting":"FiledStateWaiting"}],FieldStateSwap:[function(t,e,o){"use strict";cc._RF.push(e,"63963m9/P1DFJpYNonlRsvG","FieldStateSwap");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{a(n.next(t))}catch(e){i(e)}}function c(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,c)}a((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return a([t,e])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../Enums/Events"),a=t("./FieldState"),l=t("./FiledStateWaiting"),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.tapToTile=function(t){return i(this,void 0,Promise,function(){return s(this,function(e){switch(e.label){case 0:return[4,t.focus()];case 1:return e.sent(),[4,this.field.fieldCreator.swapTiles(t,this.field.focusTile)];case 2:return e.sent(),this.field.focusTile=null,this.field.boosterManager.useActiveBooster(),cc.systemEvent.emit(c.default.STEP_COMPLETED.toString()),this.field.setState(new l.default(this.field)),[2]}})})},e.prototype.enterToState=function(){return i(this,void 0,Promise,function(){return s(this,function(t){switch(t.label){case 0:return[4,this.field.focusTile.focus()];case 1:return t.sent(),[2]}})})},e}(a.default);o.default=u,cc._RF.pop()},{"../../Enums/Events":"Events","./FieldState":"FieldState","./FiledStateWaiting":"FiledStateWaiting"}],FieldState:[function(t,e,o){"use strict";cc._RF.push(e,"11fba8+zc1G7J/NwPNPPT0v","FieldState"),Object.defineProperty(o,"__esModule",{value:!0});o.default=function(t){this.field=t},cc._RF.pop()},{}],FieldUtils:[function(t,e,o){"use strict";cc._RF.push(e,"dd59eU7jMhH7rQ4Ss/y71rt","FieldUtils"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../Plugins/Utilities"),r=function(){function t(){if(this._fieldSize=new cc.Size(7,7),this._tileScale=1,this.tileSize=new cc.Size(171,192),this.tileScaledSize=new cc.Size(171,192),this.offset=cc.Vec2.ZERO,this.fieldWorldSize=cc.Size.ZERO,this.startPoint=cc.Vec2.ONE,null!==t.instance)return t.instance;t._instance=this}return Object.defineProperty(t,"instance",{get:function(){return this._instance},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fieldSize",{get:function(){return this._fieldSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tileScale",{get:function(){return this._tileScale},enumerable:!1,configurable:!0}),t.prototype.init=function(t,e){this.field=t,this._fieldSize=e,this.conputeFieldParams()},t.prototype.getTouchOnMap=function(t){var e=this.field.node.convertToNodeSpaceAR(t);return this.getPositionOnMap(e)},t.prototype.getPositionOnMap=function(t){var e=t.x-this.startPoint.x,o=t.y-this.startPoint.y,n=new cc.Vec2(Math.round(e/(this.tileScaledSize.width+this.offset.x)),-Math.round(o/(this.tileScaledSize.height+this.offset.y))),r=this.getMapToWorldPos(n),i=t.x-r.x,s=t.y-r.y;return i<=this.tileScaledSize.width/2&&s<=this.tileScaledSize.height/2?n:null},t.prototype.getMapToWorldPos=function(t){var e=t.x*(this.tileScaledSize.width+this.offset.x),o=t.y*(this.tileScaledSize.height+this.offset.y);return new cc.Vec2(this.startPoint.x+e,this.startPoint.y-o)},t.prototype.conputeFieldParams=function(){this.fieldWorldSize=this.field.node.getContentSize();var t=this.fieldWorldSize.width/(this.fieldSize.width*this.tileSize.width),e=this.fieldWorldSize.height/(this.fieldSize.height*this.tileSize.height),o=Math.min(t,e);this._tileScale=o,this.tileScaledSize=n.default.multiplySizeByScalar(this.tileSize,o);var r=(this.fieldWorldSize.width-this.tileScaledSize.width*this.fieldSize.width)/(this.fieldSize.width+1),i=(this.fieldWorldSize.height-this.tileScaledSize.height*this.fieldSize.height)/(this.fieldSize.height+1);this.offset=new cc.Vec2(r,i);var s=-this.fieldWorldSize.width/2+r+this.tileScaledSize.width/2,c=this.fieldWorldSize.height/2-i-this.tileScaledSize.height/2;this.startPoint=new cc.Vec2(s,c)},t._instance=null,t}();o.default=r,cc._RF.pop()},{"../Plugins/Utilities":"Utilities"}],Field:[function(t,e,o){"use strict";cc._RF.push(e,"595a3/CspFM0KVjMLduoGdm","Field");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{a(n.next(t))}catch(e){i(e)}}function c(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,c)}a((n=n.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return a([t,e])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Booster/BoosterManager"),l=t("../Enums/EasingType"),u=t("../Tile/TileColorDestroy"),p=t("../Tile/TilesCreator"),f=t("./FieldCreator"),h=t("./FieldInput"),d=t("./FieldStates/FieldStateCreation"),y=t("./FieldUtils"),v=cc._decorator,_=v.ccclass,g=v.property,b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tilesCreator=null,e.boosterManager=null,e.renderer=null,e.fallSpeed=.3,e.easingFall=l.default.bounceOut,e.fallTimeLimit=.6,e.matchingCountForUpgrade=4,e.focusTile=null,e}return r(e,t),e.prototype.init=function(t){(new y.default).init(this,t),this.fieldCreator=new f.default(this),this.fieldInput=new h.default(this),this.fieldInput.init(),this.setState(new d.default(this))},e.prototype.enable=function(){this.fieldInput.enable()},e.prototype.disable=function(){this.fieldInput.disable()},e.prototype.setState=function(t){t!==this.state&&(this.state=t,this.state.enterToState())},e.prototype.tapToTile=function(t){this.state.tapToTile(t)},e.prototype.waitTimer=function(t){return s(this,void 0,Promise,function(){var e=this;return c(this,function(){return[2,new Promise(function(o){return e.scheduleOnce(function(){return o()},t)})]})})},e.prototype.getSiblingsByColor=function(t){for(var e=[],o=[t];o.length>0;){var n=o.pop();this.fieldCreator.getNeighbors(n).forEach(function(n){n instanceof u.default&&n.config.typeDestroy===t.config.typeDestroy&&(o.push(n),e.push(n),n.needMatch=!0)})}return e},e.prototype.addUpgradedTile=function(t,e,o){this.fieldCreator.addTileOnMap(t,e,o)},e.prototype.checkToMix=function(){for(var t=this,e=this.fieldCreator.getAllTiles(),o=function(o){var r=e[o];if(n.fieldCreator.getNeighbors(r).some(function(e){return t.checkSameColor(r,e)||!(e instanceof u.default)}))return{value:!1}},n=this,r=0;r<e.length;r++){var i=o(r);if("object"==typeof i)return i.value}return!0},e.prototype.checkSameColor=function(t,e){return t instanceof u.default&&e instanceof u.default&&t.config.typeDestroy===e.config.typeDestroy},i([g(p.default)],e.prototype,"tilesCreator",void 0),i([g(a.default)],e.prototype,"boosterManager",void 0),i([g(cc.Node)],e.prototype,"renderer",void 0),i([g(cc.Float)],e.prototype,"fallSpeed",void 0),i([g({type:cc.Enum(l.default)})],e.prototype,"easingFall",void 0),i([g(cc.Float)],e.prototype,"fallTimeLimit",void 0),i([g(cc.Integer)],e.prototype,"matchingCountForUpgrade",void 0),i([_()],e)}(cc.Component);o.default=b,cc._RF.pop()},{"../Booster/BoosterManager":"BoosterManager","../Enums/EasingType":"EasingType","../Tile/TileColorDestroy":"TileColorDestroy","../Tile/TilesCreator":"TilesCreator","./FieldCreator":"FieldCreator","./FieldInput":"FieldInput","./FieldStates/FieldStateCreation":"FieldStateCreation","./FieldUtils":"FieldUtils"}],FiledStateWaiting:[function(t,e,o){"use strict";cc._RF.push(e,"33ad9yxFKNNHZ7hON1mk4Dh","FiledStateWaiting");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var i=t("../../Booster/BoosterTypes"),s=t("../../Tile/TileConstants"),c=t("./FieldState"),a=t("./FieldStateAreaDestroy"),l=t("./FieldStateDestroyByColor"),u=t("./FieldStateLineDestroy"),p=t("./FieldStateSwap"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.tapToTile=function(t){if(this.field.focusTile=t,this.field.boosterManager.activeBoosterPayload&&this.field.boosterManager.activeBoosterPayload.type!==i.BoosterTypes.None)switch(this.field.boosterManager.activeBoosterPayload.type){case i.BoosterTypes.VerticalLineDestroy:case i.BoosterTypes.HorizontalLineDestroy:this.field.setState(new u.default(this.field));break;case i.BoosterTypes.Boomb:case i.BoosterTypes.MegaBoomb:this.field.setState(new a.default(this.field));break;case i.BoosterTypes.Swap:this.field.setState(new p.default(this.field))}else switch(t.config.ability){case s.TileAbilityTypes.AreaDestroy:this.field.setState(new a.default(this.field));break;case s.TileAbilityTypes.LineDestroy:this.field.setState(new u.default(this.field));break;case s.TileAbilityTypes.ColorDestroy:default:this.field.setState(new l.default(this.field))}},e.prototype.enterToState=function(){},e}(c.default);o.default=f,cc._RF.pop()},{"../../Booster/BoosterTypes":"BoosterTypes","../../Tile/TileConstants":"TileConstants","./FieldState":"FieldState","./FieldStateAreaDestroy":"FieldStateAreaDestroy","./FieldStateDestroyByColor":"FieldStateDestroyByColor","./FieldStateLineDestroy":"FieldStateLineDestroy","./FieldStateSwap":"FieldStateSwap"}],GameManager:[function(t,e,o){"use strict";cc._RF.push(e,"86b5fotVRNJWrzH2gAhjPjc","GameManager");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./Enums/Events"),c=t("./Enums/SceneNames"),a=t("./Level/LevelConfig"),l=t("./Plugins/Input/InputManager"),u=t("./Plugins/Settings"),p=t("./Plugins/Utilities"),f=t("./ScoreStorage"),h=cc._decorator,d=h.ccclass,y=h.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.levelsConfig=[],e.settings=new u.default,e.currentLevel=1,e}return r(e,t),e.prototype.onLoad=function(){new f.default,l.default.getInstance(),this.subscribeEvents(),cc.game.addPersistRootNode(this.node)},e.prototype.start=function(){this.windowResized()},e.prototype.subscribeEvents=function(){var t=this;cc.view.setResizeCallback(function(){t.windowResized()}),cc.systemEvent.on(s.default.NEW_GAME.toString(),this.newGame,this),cc.systemEvent.on(s.default.RESTART_GAME.toString(),this.restartGame,this),cc.systemEvent.on(s.default.COMPLETE_LEVEL.toString(),this.completeLevel,this),cc.systemEvent.on(s.default.FAIL_LEVEL.toString(),this.failLevel,this),cc.systemEvent.on(s.default.LEAVE_LEVEL.toString(),this.leaveLevel,this),cc.systemEvent.on(s.default.NEXT_LEVEL.toString(),this.nextLevel,this),cc.systemEvent.on(s.default.MAIN_MENU.toString(),this.mainMenu,this)},e.prototype.windowResized=function(){this.settings.updateSettings(),cc.systemEvent.emit(s.default.WINDOW_RESIZED.toString(),this.settings)},e.prototype.loadScene=function(t,e){var o=this;void 0===t&&(t=c.default.MAIN),cc.director.loadScene(t,function(){l.default.getInstance().clearCache(),console.log("loadScene"),e&&e(),o.windowResized(),console.log("Scene "+t+" Loaded...")})},e.prototype.newGame=function(){var t=this;this.currentLevel=1,this.loadScene(c.default.GAME,function(){cc.systemEvent.emit(s.default.START_LEVEL.toString(),t.levelsConfig[t.currentLevel-1],t.currentLevel)})},e.prototype.restartGame=function(){var t=this;this.currentLevel=1,this.loadScene(c.default.GAME,function(){cc.systemEvent.emit(s.default.START_LEVEL.toString(),t.levelsConfig[t.currentLevel-1],t.currentLevel)})},e.prototype.completeLevel=function(t){this.saveResultData(t),this.loadScene(c.default.RESULT,function(){cc.systemEvent.emit(s.default.SHOW_RESULT.toString(),t)})},e.prototype.failLevel=function(t){this.saveResultData(t),this.loadScene(c.default.RESULT,function(){cc.systemEvent.emit(s.default.SHOW_RESULT.toString(),t)})},e.prototype.leaveLevel=function(t){this.saveResultData(t),this.loadScene(c.default.RESULT,function(){cc.systemEvent.emit(s.default.SHOW_RESULT.toString(),t)})},e.prototype.nextLevel=function(){var t=this,e=this.currentLevel>=this.levelsConfig.length?p.default.getRandomElementFromArray(this.levelsConfig):this.levelsConfig[this.currentLevel];this.currentLevel++,this.loadScene(c.default.GAME,function(){cc.systemEvent.emit(s.default.START_LEVEL.toString(),e,t.currentLevel)})},e.prototype.mainMenu=function(){this.loadScene(c.default.MAIN)},e.prototype.saveResultData=function(t){if(f.default.instance.get().score<=t.score){var e={score:t.score,steps:t.steps,level:this.currentLevel};f.default.instance.save(e)}},i([y(a.LevelConfig)],e.prototype,"levelsConfig",void 0),i([d],e)}(cc.Component);o.default=v,cc._RF.pop()},{"./Enums/Events":"Events","./Enums/SceneNames":"SceneNames","./Level/LevelConfig":"LevelConfig","./Plugins/Input/InputManager":"InputManager","./Plugins/Settings":"Settings","./Plugins/Utilities":"Utilities","./ScoreStorage":"ScoreStorage"}],IBoosterInput:[function(t,e,o){"use strict";cc._RF.push(e,"89a20z+TJZLYZKscEw7BEkd","IBoosterInput"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],IBoosterManager:[function(t,e,o){"use strict";cc._RF.push(e,"64660hhciVIoKJEOe3Dahuv","IBoosterManager"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],IBoosterPayload:[function(t,e,o){"use strict";cc._RF.push(e,"34b6d1f07dFya9oidUVz8dy","IBoosterPayload"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],IBoosterRenderer:[function(t,e,o){"use strict";cc._RF.push(e,"0cdacYlRu9Hsbhire+pzNtu","IBoosterRenderer"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],IBooster:[function(t,e,o){"use strict";cc._RF.push(e,"dcc412WKzxMT5BfuFmTz+Wh","IBooster"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],IConfiguration:[function(t,e,o){"use strict";cc._RF.push(e,"7de95s85IdBpodhD2RpEpf5","IConfiguration"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],ICounterInitData:[function(t,e,o){"use strict";cc._RF.push(e,"3dc8coh6FFKZJWkopoyi62Y","ICounterInitData"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],IFiledState:[function(t,e,o){"use strict";cc._RF.push(e,"1d0771lyopGMIuEfzayZWY4","IFiledState"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],IProgressBarInitData:[function(t,e,o){"use strict";cc._RF.push(e,"986e0/y759DuIyAoqKSwOdH","IProgressBarInitData"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],IResultData:[function(t,e,o){"use strict";cc._RF.push(e,"d200aix9bhD8opHCO0W56kQ","IResultData"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],InputCatcher:[function(t,e,o){"use strict";cc._RF.push(e,"bfd25+KDbhOjY67Qa0BTnuK","InputCatcher");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./InputSources"),c=t("./InputTypes"),a=t("../../Enums/Events"),l=cc._decorator,u=l.ccclass,p=l.property,f=l.menu,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.inputSource=s.default.Default,e}return r(e,t),e.prototype.onEnable=function(){this.toggleSubscribe(!0)},e.prototype.onDisable=function(){this.toggleSubscribe(!1)},e.prototype.toggleSubscribe=function(t){var e=t?"on":"off";this.node[e]("touchstart",this.onDown,this),this.node[e]("touchmove",this.onMove,this),this.node[e]("touchend",this.onUp,this),this.node[e]("touchcancel",this.onUp,this)},e.prototype.onDown=function(t){cc.systemEvent.emit(a.default.INPUT.toString(),c.default.Down,t,this.inputSource)},e.prototype.onMove=function(t){cc.systemEvent.emit(a.default.INPUT.toString(),c.default.Move,t,this.inputSource)},e.prototype.onUp=function(t){cc.systemEvent.emit(a.default.INPUT.toString(),c.default.Up,t,this.inputSource)},i([p({type:cc.Enum(s.default)})],e.prototype,"inputSource",void 0),i([u,f("Input/Catcher")],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../../Enums/Events":"Events","./InputSources":"InputSources","./InputTypes":"InputTypes"}],InputManagerData:[function(t,e,o){"use strict";cc._RF.push(e,"adbe1EPW/NA849ypE+c1+xC","InputManagerData"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],InputManager:[function(t,e,o){"use strict";cc._RF.push(e,"5cccai9TDBE4ZA2Z2miNWe2","InputManager");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var i=t("./InputTypes"),s=t("../../Enums/Events"),c=function(t){function e(){var e=t.call(this)||this;return e.isLockedMultiTouch=!0,e.currentTouchID=null,e.subscribeEvents(),e}return r(e,t),e.getInstance=function(){return null===this.instance&&(this.instance=new e),this.instance},e.prototype.clearCache=function(){this.currentTouchID=null},e.prototype.on=function(e,o,n,r){return t.prototype.on.call(this,""+e,o,n,r)},e.prototype.off=function(e,o,n){t.prototype.off.call(this,""+e,o,n)},e.prototype.subscribeEvents=function(){cc.systemEvent.on(s.default.INPUT.toString(),this.onInput,this)},e.prototype.onInput=function(t,e,o){this.isLockedMultiTouch&&null!==this.currentTouchID&&this.currentTouchID!==e.getID()||(t===i.default.Up&&(this.currentTouchID=null),t===i.default.Down&&(this.currentTouchID=e.getID()),this.emit(i.default.None.toString(),{type:t,eventTouch:e,touchSource:o}),this.emit(t.toString(),{type:t,eventTouch:e,touchSource:o}))},e.instance=null,e}(cc.EventTarget);o.default=c,cc._RF.pop()},{"../../Enums/Events":"Events","./InputTypes":"InputTypes"}],InputSources:[function(t,e,o){"use strict";var n;cc._RF.push(e,"e9986szK2hFeKEtGOFsYztN","InputSources"),Object.defineProperty(o,"__esModule",{value:!0}),function(t){t[t.Default=0]="Default",t[t.CommonCatcher=1]="CommonCatcher",t[t.Field=2]="Field",t[t.BoosterButton=3]="BoosterButton",t[t.NewGameButton=4]="NewGameButton",t[t.AchievementsButton=5]="AchievementsButton",t[t.MenuOkButton=6]="MenuOkButton",t[t.PauseButton=7]="PauseButton",t[t.ResumeButton=8]="ResumeButton",t[t.ExitButton=9]="ExitButton",t[t.ResultNextLeveleButton=10]="ResultNextLeveleButton",t[t.ResultHomeButton=11]="ResultHomeButton",t[t.ResultOkButton=12]="ResultOkButton"}(n||(n={})),o.default=n,cc._RF.pop()},{}],InputTypes:[function(t,e,o){"use strict";var n;cc._RF.push(e,"ab427JsHMhCGaPtVWlWVVgS","InputTypes"),Object.defineProperty(o,"__esModule",{value:!0}),function(t){t[t.None=0]="None",t[t.Down=1]="Down",t[t.Move=2]="Move",t[t.Up=3]="Up"}(n||(n={})),o.default=n,cc._RF.pop()},{}],LevelBoosterConfig:[function(t,e,o){"use strict";cc._RF.push(e,"4bcd4BUKc9K+olzj6x+Sdam","LevelBoosterConfig");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.LevelBoosterConfig=void 0;var s=t("../Booster/BoosterConfig"),c=t("../Booster/BoosterTypes"),a=cc._decorator,l=a.ccclass,u=a.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.radius=0,e}return r(e,t),i([u({type:cc.SpriteFrame,visible:!1,override:!0})],e.prototype,"icon",void 0),i([u({type:cc.Integer,visible:function(){return this.type===c.BoosterTypes.Boomb||this.type===c.BoosterTypes.MegaBoomb},override:!0})],e.prototype,"radius",void 0),i([l("LevelBoosterConfig")],e)}(s.BoosterConfig);o.LevelBoosterConfig=p,cc._RF.pop()},{"../Booster/BoosterConfig":"BoosterConfig","../Booster/BoosterTypes":"BoosterTypes"}],LevelConfig:[function(t,e,o){"use strict";cc._RF.push(e,"e7f102CJdtIVJEvzimWasc+","LevelConfig");var n=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.LevelConfig=void 0;var r=t("./LevelBoosterConfig"),i=t("./LevelTileConfig"),s=cc._decorator,c=s.ccclass,a=s.property,l=function(){function t(){this.steps=15,this.score=800,this.scoreStep=25,this.fieldSize=cc.Size.ZERO,this.boosters=[],this.tiles=[]}return n([a(cc.Integer)],t.prototype,"steps",void 0),n([a(cc.Integer)],t.prototype,"score",void 0),n([a(cc.Integer)],t.prototype,"scoreStep",void 0),n([a(cc.Size)],t.prototype,"fieldSize",void 0),n([a(r.LevelBoosterConfig)],t.prototype,"boosters",void 0),n([a(i.LevelTileConfig)],t.prototype,"tiles",void 0),n([c("LevelConfig")],t)}();o.LevelConfig=l,cc._RF.pop()},{"./LevelBoosterConfig":"LevelBoosterConfig","./LevelTileConfig":"LevelTileConfig"}],LevelManager:[function(t,e,o){"use strict";cc._RF.push(e,"a1713r843BF+7R9yadSyA5B","LevelManager");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{a(n.next(t))}catch(e){i(e)}}function c(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,c)}a((n=n.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return a([t,e])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Booster/BoosterManager"),l=t("../Enums/Events"),u=t("../Field/Field"),p=t("../Tile/TilesCreator"),f=t("../UI/Counter/Counter"),h=t("../UI/PauseMenu/PauseMenu"),d=t("../UI/ProgressBar/ProgressBar"),y=t("./LevelConfig"),v=cc._decorator,_=v.ccclass,g=v.property,b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pauseMenu=null,e.scoreCounter=null,e.stepsCounter=null,e.progressBar=null,e.boosterManager=null,e.field=null,e.tilesCreator=null,e.config=null,e.levelNumber=0,e}return r(e,t),e.prototype.onLoad=function(){cc.systemEvent.on(l.default.START_LEVEL.toString(),this.onStartLevel,this),cc.systemEvent.on(l.default.UPDATE_SCORE.toString(),this.onUpdateScore,this),cc.systemEvent.on(l.default.STEP_COMPLETED.toString(),this.onStepCompleted,this)},e.prototype.pause=function(){this.field.disable(),this.boosterManager.disable()},e.prototype.resume=function(){this.field.enable(),this.boosterManager.enable()},e.prototype.leave=function(){this.pause(),cc.systemEvent.emit(l.default.LEAVE_LEVEL.toString(),{steps:this.stepsCounter.getCurrentValue(),score:this.scoreCounter.getCurrentValue(),isFail:!1})},e.prototype.onStartLevel=function(t,e){var o=this;this.levelNumber=e,this.boosterManager.init(t.boosters),this.boosterManager.enable(),this.tilesCreator.init(this.field.renderer,t.tiles,t.fieldSize.width*t.fieldSize.height),this.field.init(t.fieldSize),this.stepsCounter.init({startValue:t.steps,incrementValue:-1,threshold:0,callback:function(){return s(o,void 0,void 0,function(){return c(this,function(){return this.pause(),[2]})})}}),this.scoreCounter.init({startValue:0,incrementValue:t.scoreStep}),this.progressBar.init({goal:t.score,callback:function(){return s(o,void 0,void 0,function(){return c(this,function(){return this.pause(),[2]})})}}),this.pauseMenu.init(this)},e.prototype.onUpdateScore=function(t){void 0===t&&(t=1),this.scoreCounter.updateValue(t),this.progressBar.updateProgress(this.scoreCounter.getCurrentValue())},e.prototype.onStepCompleted=function(){return s(this,void 0,Promise,function(){return c(this,function(t){switch(t.label){case 0:return this.stepsCounter.updateValue(),this.progressBar.isGoalComplete?[4,this.field.waitTimer(1.5)]:[3,2];case 1:t.sent(),cc.systemEvent.emit(l.default.COMPLETE_LEVEL.toString(),{steps:this.stepsCounter.getCurrentValue(),score:this.scoreCounter.getCurrentValue(),isNextLevel:!0,level:this.levelNumber}),t.label=2;case 2:return this.stepsCounter.thresholdReached?[4,this.field.waitTimer(1)]:[3,4];case 3:t.sent(),cc.systemEvent.emit(l.default.FAIL_LEVEL.toString(),{steps:this.stepsCounter.getCurrentValue(),score:this.scoreCounter.getCurrentValue(),isFail:!0}),t.label=4;case 4:return[2]}})})},i([g(h.default)],e.prototype,"pauseMenu",void 0),i([g(f.default)],e.prototype,"scoreCounter",void 0),i([g(f.default)],e.prototype,"stepsCounter",void 0),i([g(d.default)],e.prototype,"progressBar",void 0),i([g(a.default)],e.prototype,"boosterManager",void 0),i([g(u.default)],e.prototype,"field",void 0),i([g(p.default)],e.prototype,"tilesCreator",void 0),i([g(y.LevelConfig)],e.prototype,"config",void 0),i([_],e)}(cc.Component);o.default=b,cc._RF.pop()},{"../Booster/BoosterManager":"BoosterManager","../Enums/Events":"Events","../Field/Field":"Field","../Tile/TilesCreator":"TilesCreator","../UI/Counter/Counter":"Counter","../UI/PauseMenu/PauseMenu":"PauseMenu","../UI/ProgressBar/ProgressBar":"ProgressBar","./LevelConfig":"LevelConfig"}],LevelTileConfig:[function(t,e,o){"use strict";cc._RF.push(e,"aae8at7trZF9oqXVSwOwU3I","LevelTileConfig");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.LevelTileConfig=void 0;var s=t("../Tile/TileAreaDestroy"),c=cc._decorator,a=c.ccclass,l=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spriteFrame=null,e}return r(e,t),i([l({type:cc.SpriteFrame,visible:!1,override:!0})],e.prototype,"spriteFrame",void 0),i([a("LevelTileConfig")],e)}(s.TileAreaConfig);o.LevelTileConfig=u,cc._RF.pop()},{"../Tile/TileAreaDestroy":"TileAreaDestroy"}],MainMenuRenderer:[function(t,e,o){"use strict";cc._RF.push(e,"6b46e8J0DNFUqzdmMdTtK/a","MainMenuRenderer");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{a(n.next(t))}catch(e){i(e)}}function c(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,c)}a((n=n.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return a([t,e])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,l=a.ccclass,u=a.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.modalMenu=null,e.modalAchievements=null,e.labelLevel=null,e.labelSteps=null,e.labelScore=null,e.duration=.1,e}return r(e,t),e.prototype.showMenu=function(){return s(this,void 0,Promise,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.playAnimation(this.modalAchievements,0)];case 1:return t.sent(),[4,this.playAnimation(this.modalMenu,255)];case 2:return t.sent(),[2]}})})},e.prototype.showAchievements=function(t){return s(this,void 0,Promise,function(){return c(this,function(e){switch(e.label){case 0:return this.labelLevel.string=""+t.level,this.labelSteps.string=""+t.steps,this.labelScore.string=""+t.score,[4,this.playAnimation(this.modalMenu,0)];case 1:return e.sent(),[4,this.playAnimation(this.modalAchievements,255)];case 2:return e.sent(),[2]}})})},e.prototype.playAnimation=function(t,e){return s(this,void 0,Promise,function(){var o=this;return c(this,function(){return[2,new Promise(function(n){cc.tween(t).to(o.duration,{opacity:e}).call(function(){return n()}).start()})]})})},i([u(cc.Node)],e.prototype,"modalMenu",void 0),i([u(cc.Node)],e.prototype,"modalAchievements",void 0),i([u(cc.Label)],e.prototype,"labelLevel",void 0),i([u(cc.Label)],e.prototype,"labelSteps",void 0),i([u(cc.Label)],e.prototype,"labelScore",void 0),i([l],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],MainMenu:[function(t,e,o){"use strict";cc._RF.push(e,"bb0ceG1KgdMTbE7RN4denEV","MainMenu");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{a(n.next(t))}catch(e){i(e)}}function c(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,c)}a((n=n.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return a([t,e])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Enums/Events"),l=t("../../Plugins/Input/InputManager"),u=t("../../Plugins/Input/InputSources"),p=t("../../Plugins/Input/InputTypes"),f=t("../../ScoreStorage"),h=t("./MainMenuRenderer"),d=cc._decorator,y=d.ccclass,v=(d.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.renderer=null,e.isInputActive=!0,e}return r(e,t),e.prototype.onLoad=function(){this.renderer=this.node.getComponent(h.default),l.default.getInstance().on(p.default.Up,this.onUp,this)},e.prototype.onUp=function(t){return s(this,void 0,Promise,function(){return c(this,function(e){switch(e.label){case 0:if(!this.isInputActive)return[2];switch(this.isInputActive=!1,t.touchSource){case u.default.AchievementsButton:return[3,1];case u.default.NewGameButton:return[3,3];case u.default.MenuOkButton:return[3,4]}return[3,6];case 1:return[4,this.showAchievements()];case 2:return e.sent(),[3,6];case 3:return cc.systemEvent.emit(a.default.NEW_GAME.toString()),[3,6];case 4:return[4,this.renderer.showMenu()];case 5:return e.sent(),[3,6];case 6:return this.isInputActive=!0,[2]}})})},e.prototype.showAchievements=function(){return s(this,void 0,Promise,function(){return c(this,function(){return this.renderer.showAchievements(f.default.instance.get()),[2]})})},i([y],e)}(cc.Component));o.default=v,cc._RF.pop()},{"../../Enums/Events":"Events","../../Plugins/Input/InputManager":"InputManager","../../Plugins/Input/InputSources":"InputSources","../../Plugins/Input/InputTypes":"InputTypes","../../ScoreStorage":"ScoreStorage","./MainMenuRenderer":"MainMenuRenderer"}],PauseMenuRenderer:[function(t,e,o){"use strict";cc._RF.push(e,"af4b17ouutBQ5S46vpBO6J2","PauseMenuRenderer");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{a(n.next(t))}catch(e){i(e)}}function c(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,c)}a((n=n.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return a([t,e])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,l=a.ccclass,u=a.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pauseModal=null,e.duration=.1,e}return r(e,t),e.prototype.onLoad=function(){this.pauseModal.active=!1,this.pauseModal.opacity=0},e.prototype.showModal=function(){return s(this,void 0,Promise,function(){return c(this,function(){return this.pauseModal.active=!0,this.playAnimation(this.pauseModal,255),[2]})})},e.prototype.hideModal=function(){return s(this,void 0,Promise,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.playAnimation(this.pauseModal,0)];case 1:return t.sent(),this.pauseModal.active=!1,[2]}})})},e.prototype.playAnimation=function(t,e){return s(this,void 0,Promise,function(){var o=this;return c(this,function(){return[2,new Promise(function(n){cc.tween(t).to(o.duration,{opacity:e}).call(function(){return n()}).start()})]})})},i([u(cc.Node)],e.prototype,"pauseModal",void 0),i([l],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],PauseMenu:[function(t,e,o){"use strict";cc._RF.push(e,"39effeFaDtBbJD/dsUHg3hD","PauseMenu");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{a(n.next(t))}catch(e){i(e)}}function c(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,c)}a((n=n.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return a([t,e])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Plugins/Input/InputManager"),l=t("../../Plugins/Input/InputSources"),u=t("../../Plugins/Input/InputTypes"),p=t("./PauseMenuRenderer"),f=cc._decorator,h=f.ccclass,d=(f.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.levelManager=null,e.renderer=null,e.isInputActive=!1,e}return r(e,t),e.prototype.onLoad=function(){this.renderer=this.node.getComponent(p.default),a.default.getInstance().on(u.default.Up,this.onUp,this)},e.prototype.init=function(t){this.levelManager=t,this.isInputActive=!0},e.prototype.onUp=function(t){return s(this,void 0,Promise,function(){return c(this,function(e){switch(e.label){case 0:if(!this.isInputActive)return[2];switch(this.isInputActive=!1,t.touchSource){case l.default.PauseButton:return[3,1];case l.default.ResumeButton:return[3,3];case l.default.ExitButton:return[3,5]}return[3,6];case 1:return this.levelManager.pause(),[4,this.renderer.showModal()];case 2:return e.sent(),[3,6];case 3:return[4,this.renderer.hideModal()];case 4:return e.sent(),this.levelManager.resume(),[3,6];case 5:return this.renderer.hideModal(),this.levelManager.leave(),[3,6];case 6:return this.isInputActive=!0,[2]}})})},i([h],e)}(cc.Component));o.default=d,cc._RF.pop()},{"../../Plugins/Input/InputManager":"InputManager","../../Plugins/Input/InputSources":"InputSources","../../Plugins/Input/InputTypes":"InputTypes","./PauseMenuRenderer":"PauseMenuRenderer"}],PositionComponent:[function(t,e,o){"use strict";cc._RF.push(e,"3f47eKal9dEBLQw4z+dhr3p","PositionComponent");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s,c,a=t("../Base/SimpleTransformComponent"),l=t("../../../Settings"),u=cc._decorator,p=u.ccclass,f=u.property;(function(t){t[t.Relative=0]="Relative",t[t.Absolute=1]="Absolute"})(s||(s={})),function(t){t[t.UI=0]="UI",t[t.World=1]="World"}(c||(c={}));var h=function(){function t(){this.positionType=s.Relative,this.layer=c.UI,this.position=cc.v2(0,0),this.offset=cc.v2(0,0),this.settings=new l.default}return t.prototype.applyTransform=function(t,e,o){void 0===o&&(o=!1);var n=cc.v2(),r=this.position.clone(),i=this.checkTransformReference(e,o);this.positionType===s.Relative?(i||(i=this.calculateReferenceSize()),n=this.calculatePositionByRefSize(r,i)):this.positionType===s.Absolute&&(n=r.clone().mul(this.layer===c.UI?this.settings.SCALE:1)),this.applyOffset(n,this.offset,this.layer),this.applyPosition(t,n)},t.prototype.checkTransformReference=function(t,e){return t?cc.size(t.width*(e?t.scaleX:1),t.height*(e?t.scaleY:1)):null},t.prototype.calculateReferenceSize=function(){return this.layer===c.UI?cc.size(this.settings.GAME_WIDTH,this.settings.GAME_HEIGHT):this.layer===c.World?cc.size(this.settings.WORLD_HEIGHT,this.settings.WORLD_WIDTH):cc.size(1,1)},t.prototype.applyOffset=function(t,e,o){return t.addSelf(e.mul(o===c.UI?this.settings.SCALE:1))},t.prototype.applyPosition=function(t,e){t.setPosition(e)},t.prototype.calculatePositionByRefSize=function(t,e){return cc.v2(e.width*t.x,e.height*t.y)},t.prototype.getData=function(){return{positionType:this.positionType,layer:this.layer,position:this.position.clone(),offset:this.offset.clone()}},t.prototype.applyData=function(t){this.positionType=t.positionType,this.layer=t.layer,this.position=t.position,this.offset=t.offset},i([f({type:cc.Enum(s)})],t.prototype,"positionType",void 0),i([f({type:cc.Enum(c)})],t.prototype,"layer",void 0),i([f(cc.Vec2)],t.prototype,"position",void 0),i([f(cc.Vec2)],t.prototype,"offset",void 0),i([p("PositionConfiguration")],t)}(),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.configuration=null,e}return r(e,t),e.prototype.execute=function(t,e){this.configuration&&this.configuration.applyTransform(t,e)},e.prototype.reset=function(t){this.configuration=t?new h:null},i([f({type:h,serializable:!0,visible:function(){return this.isActive}})],e.prototype,"configuration",void 0),i([p("PositionComponent")],e)}(a.default);o.default=d,cc._RF.pop()},{"../../../Settings":"Settings","../Base/SimpleTransformComponent":"SimpleTransformComponent"}],ProgressBarRenderer:[function(t,e,o){"use strict";cc._RF.push(e,"5c0a8ofRmdKObt9uQZXdnVw","ProgressBarRenderer");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../Enums/EasingType"),c=t("../../Plugins/Utilities"),a=cc._decorator,l=a.ccclass,u=a.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fillLine=null,e.easing=s.default.quadOut,e.speed=.03,e.startLinePosX=-621.5,e.lineWidth=1243,e.tween=null,e}return r(e,t),e.prototype.onLoad=function(){this.lineWidth=this.fillLine.width,this.startLinePosX=-this.lineWidth/2,this.fillLine.x=this.startLinePosX},e.prototype.setProgress=function(t){this.tween&&this.tween.stop();var e=this.startLinePosX+c.default.clamp(this.lineWidth*t,0,this.lineWidth),o=(e-this.fillLine.x)/this.speed,n=this.fillLine.position.clone();n.x=e,this.tween=cc.tween(this.fillLine).to(o,{position:n},{easing:cc.easing[s.default[this.easing]]}).start()},i([u(cc.Node)],e.prototype,"fillLine",void 0),i([u({type:cc.Enum(s.default)})],e.prototype,"easing",void 0),i([u(cc.Float)],e.prototype,"speed",void 0),i([l],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../../Enums/EasingType":"EasingType","../../Plugins/Utilities":"Utilities"}],ProgressBar:[function(t,e,o){"use strict";cc._RF.push(e,"f8c31cJBfhN6oRnGTJWNy1D","ProgressBar");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../Plugins/Utilities"),c=t("./ProgressBarRenderer"),a=cc._decorator,l=a.ccclass,u=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.renderer=null,e.goal=100,e.currentProgress=0,e.callback=null,e._isGoalComplete=!1,e}return r(e,t),Object.defineProperty(e.prototype,"isGoalComplete",{get:function(){return this._isGoalComplete},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.renderer=this.node.getComponent(c.default)},e.prototype.init=function(t){this.goal=t.goal,this.callback=t.callback,this.currentProgress=0,this._isGoalComplete=!1,this.updateProgress(0)},e.prototype.updateProgress=function(t){this.isGoalComplete||(this.currentProgress=s.default.clamp(t,0,this.goal),this.renderer.setProgress(this.currentProgress/this.goal),this.currentProgress===this.goal&&(this.callback(),this._isGoalComplete=!0))},i([l],e)}(cc.Component));o.default=u,cc._RF.pop()},{"../../Plugins/Utilities":"Utilities","./ProgressBarRenderer":"ProgressBarRenderer"}],ResultMenuRenderer:[function(t,e,o){"use strict";cc._RF.push(e,"85b2baNwAxDLowlMwJVq3EV","ResultMenuRenderer");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,a=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.levelWin=null,e.levelNumberLabel=null,e.stepsLabel=null,e.scoreWinLabel=null,e.levelFail=null,e.scoreFailLabel=null,e.titleFailLabel=null,e}return r(e,t),e.prototype.onLoad=function(){this.levelWin.opacity=0,this.levelWin.active=!1,this.levelFail.opacity=0,this.levelFail.active=!1},e.prototype.showWinModal=function(t,e,o){this.levelNumberLabel.string="\u0443\u0440\u043e\u0432\u0435\u043d\u044c "+o,this.stepsLabel.string=""+t,this.scoreWinLabel.string=""+e,this.levelWin.active=!0,this.levelWin.opacity=255},e.prototype.showFailModal=function(t,e){this.titleFailLabel.string=t?"\u043f\u043e\u0440\u0430\u0436\u0435\u043d\u0438\u0435":"\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442",this.scoreFailLabel.string=""+e,this.levelFail.active=!0,this.levelFail.opacity=255},i([a(cc.Node)],e.prototype,"levelWin",void 0),i([a(cc.Label)],e.prototype,"levelNumberLabel",void 0),i([a(cc.Label)],e.prototype,"stepsLabel",void 0),i([a(cc.Label)],e.prototype,"scoreWinLabel",void 0),i([a(cc.Node)],e.prototype,"levelFail",void 0),i([a(cc.Label)],e.prototype,"scoreFailLabel",void 0),i([a(cc.Label)],e.prototype,"titleFailLabel",void 0),i([c],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],ResultMenu:[function(t,e,o){"use strict";cc._RF.push(e,"2ac3fLgxrVIYopK0Zh3bcAF","ResultMenu");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{a(n.next(t))}catch(e){i(e)}}function c(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,c)}a((n=n.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return a([t,e])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Enums/Events"),l=t("../../Plugins/Input/InputManager"),u=t("../../Plugins/Input/InputSources"),p=t("../../Plugins/Input/InputTypes"),f=t("./ResultMenuRenderer"),h=cc._decorator,d=h.ccclass,y=(h.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.renderer=null,e.isInputActive=!0,e}return r(e,t),e.prototype.onLoad=function(){this.renderer=this.node.getComponent(f.default),cc.systemEvent.on(a.default.SHOW_RESULT.toString(),this.onShowResult,this),l.default.getInstance().on(p.default.Up,this.onUp,this),console.log(l.default.getInstance(),"INPUT",this)},e.prototype.onShowResult=function(t){t.isNextLevel?this.renderer.showWinModal(t.steps,t.score,t.level):this.renderer.showFailModal(t.isFail,t.score)},e.prototype.onUp=function(t){return s(this,void 0,Promise,function(){return c(this,function(){if(console.log("ResultMenu",t.touchSource),!this.isInputActive)return[2];switch(this.isInputActive=!1,t.touchSource){case u.default.ResultHomeButton:cc.systemEvent.emit(a.default.MAIN_MENU.toString());break;case u.default.ResultNextLeveleButton:cc.systemEvent.emit(a.default.NEXT_LEVEL.toString());break;case u.default.ResultOkButton:cc.systemEvent.emit(a.default.MAIN_MENU.toString())}return this.isInputActive=!0,[2]})})},i([d],e)}(cc.Component));o.default=y,cc._RF.pop()},{"../../Enums/Events":"Events","../../Plugins/Input/InputManager":"InputManager","../../Plugins/Input/InputSources":"InputSources","../../Plugins/Input/InputTypes":"InputTypes","./ResultMenuRenderer":"ResultMenuRenderer"}],RotationComponent:[function(t,e,o){"use strict";cc._RF.push(e,"4069ei4PWlPwYzr1Kpp0AkJ","RotationComponent");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Base/SimpleTransformComponent"),c=cc._decorator,a=c.ccclass,l=c.property,u=function(){function t(){this.rotation=0}return t.prototype.applyTransform=function(t){t.angle=this.rotation},t.prototype.getData=function(){return{rotation:this.rotation}},t.prototype.applyData=function(t){this.rotation=t.rotation},i([l()],t.prototype,"rotation",void 0),i([a("RotationConfiguration")],t)}(),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.configuration=null,e}return r(e,t),e.prototype.execute=function(t,e){this.configuration&&this.configuration.applyTransform(t,e)},e.prototype.reset=function(t){this.configuration=t?new u:null},i([l({type:u,serializable:!0,visible:function(){return this.isActive}})],e.prototype,"configuration",void 0),i([a("RotationComponent")],e)}(s.default);o.default=p,cc._RF.pop()},{"../Base/SimpleTransformComponent":"SimpleTransformComponent"}],ScaleComponent:[function(t,e,o){"use strict";cc._RF.push(e,"ac858khkjFIGafnOG+6gWN7","ScaleComponent");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s,c,a,l,u=t("../Base/SimpleTransformComponent"),p=t("../../../Settings"),f=cc._decorator,h=f.ccclass,d=f.property;(function(t){t[t.Proportional=0]="Proportional",t[t.Unproportional=1]="Unproportional"})(s||(s={})),function(t){t[t.Inscribe=0]="Inscribe",t[t.Describe=1]="Describe",t[t.FitWidth=3]="FitWidth",t[t.FitHeight=4]="FitHeight",t[t.Unproportional=5]="Unproportional",t[t.Default=6]="Default"}(c||(c={})),function(t){t[t.Relative=0]="Relative",t[t.Constant=1]="Constant"}(a||(a={})),function(t){t[t.UI=0]="UI",t[t.World=1]="World"}(l||(l={}));var y=function(){function t(){this.sizeMode=a.Relative,this.fitMode=c.Inscribe,this.layer=l.UI,this.desiredSize=cc.v2(),this.padding=cc.v2(),this.settings=new p.default}return t.prototype.applyTransform=function(t,e,o){void 0===o&&(o=!1);var n=this.checkTransformReference(e,o);n||(n=this.calculateReferenceSize());var r=cc.v2(),i=this.calculateActualSize(n),s=cc.v2(i.x/t.width,i.y/t.height);r=this.calculateTargetScale(this.fitMode,s,cc.v2(t.scaleX,t.scaleY),i),t.scaleX=r.x,t.scaleY=r.y},t.prototype.checkTransformReference=function(t,e){return t?cc.v2(t.width*(e?t.scaleX:1),t.height*(e?t.scaleY:1)):null},t.prototype.calculateReferenceSize=function(){return this.layer===l.UI?cc.v2(this.settings.GAME_WIDTH,this.settings.GAME_HEIGHT):this.layer===l.World?cc.v2(this.settings.WORLD_HEIGHT,this.settings.WORLD_WIDTH):cc.v2(1,1)},t.prototype.calculateTargetScale=function(t,e,o,n){var r=e.clone();switch(!0){case t===c.Inscribe:r.x=r.y=Math.min(r.x,r.y);break;case t===c.Describe:r.x=r.y=Math.max(r.x,r.y);break;case t===c.FitHeight:r.x=r.y;break;case t===c.FitWidth:r.y=r.x;break;case t===c.Unproportional:this.sizeMode===a.Constant&&(r=n.clone());break;case t===c.Default:r=this.calculateTargetScale(c.Inscribe,e,o,n)}return r},t.prototype.calculateActualSize=function(t){var e=null;switch(!0){case this.sizeMode===a.Relative&&this.layer===l.UI:e=this.calculateSizeByRelativeSize(this.desiredSize,t).sub(this.padding.mul(this.settings.SCALE));break;case this.sizeMode===a.Relative&&this.layer===l.World:e=this.calculateSizeByRelativeSize(this.desiredSize,t);break;case this.sizeMode===a.Constant&&this.layer===l.UI:e=this.desiredSize.clone().mul(this.settings.SCALE);break;case this.sizeMode===a.Constant&&this.layer===l.World:e=this.desiredSize.clone();break;default:e=cc.v2(1,1)}return e},t.prototype.calculateSizeByRelativeSize=function(t,e){return cc.v2(e.x*t.x,e.y*t.y)},t.prototype.getData=function(){return{sizeMode:this.sizeMode,fitMode:this.fitMode,layer:this.layer,desiredSize:this.desiredSize,padding:this.padding}},t.prototype.applyData=function(t){this.sizeMode=t.sizeMode,this.fitMode=t.fitMode,this.layer=t.layer,this.desiredSize=t.desiredSize.clone(),this.padding=t.padding.clone()},i([d({type:cc.Enum(a)})],t.prototype,"sizeMode",void 0),i([d({type:cc.Enum(c)})],t.prototype,"fitMode",void 0),i([d({type:cc.Enum(l)})],t.prototype,"layer",void 0),i([d(cc.Vec2)],t.prototype,"desiredSize",void 0),i([d({visible:function(){return this.sizeMode===a.Relative}})],t.prototype,"padding",void 0),i([h("ScaleConfiguration")],t)}(),v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.configuration=null,e}return r(e,t),e.prototype.execute=function(t,e){this.configuration&&this.configuration.applyTransform(t,e)},e.prototype.reset=function(t){this.configuration=t?new y:null},i([d({type:y,serializable:!0,visible:function(){return this.isActive}})],e.prototype,"configuration",void 0),i([h("ScaleComponent")],e)}(u.default);o.default=v,cc._RF.pop()},{"../../../Settings":"Settings","../Base/SimpleTransformComponent":"SimpleTransformComponent"}],SceneNames:[function(t,e,o){"use strict";var n;cc._RF.push(e,"20965GVHmpAr6JtFHt1o2Yc","SceneNames"),Object.defineProperty(o,"__esModule",{value:!0}),function(t){t.MAIN="Main",t.GAME="Game",t.RESULT="Result"}(n||(n={})),o.default=n,cc._RF.pop()},{}],ScoreStorage:[function(t,e,o){"use strict";cc._RF.push(e,"1dd578FKKBDfp/n+QnGe3hE","ScoreStorage"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){if(this.storageName="blastGame",null!==t.instance)return t.instance;t._instance=this,this.get()||this.save({steps:0,level:0,score:0})}return Object.defineProperty(t,"instance",{get:function(){return this._instance},enumerable:!1,configurable:!0}),t.prototype.save=function(t){localStorage.setItem(this.storageName,JSON.stringify(t))},t.prototype.get=function(){var t=localStorage.getItem(this.storageName);return JSON.parse(t)},t._instance=null,t}();o.default=n,cc._RF.pop()},{}],Settings:[function(t,e,o){"use strict";cc._RF.push(e,"c06fdeJcv5NuLG0POEXCOfA","Settings");var n=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,i=r.ccclass,s=(r.property,function(){function t(){this.default_width=0,this.default_height=0,this.game_width=0,this.game_height=0,this.scale=0,this.is_landscape=!1,this.half_width=0,this.half_heigth=0,this.world_width=0,this.world_height=0;var t=e.instance;if(void 0!==t)return t;e.instance=this,this.default_width=640,this.default_height=1136,this.game_width=640,this.game_height=1136,this.scale=1,this.is_landscape=!1,this.half_width=320,this.half_heigth=568,this.world_width=1366,this.world_height=1366}var e;return e=t,Object.defineProperty(t.prototype,"DEFAULT_WIDTH",{get:function(){return this.default_width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"DEFAULT_HEIGHT",{get:function(){return this.default_height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"GAME_WIDTH",{get:function(){return this.game_width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"GAME_HEIGHT",{get:function(){return this.game_height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"IS_LANDSCAPE",{get:function(){return this.is_landscape},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"HALF_WIDTH",{get:function(){return this.half_width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"HALF_HEIGHT",{get:function(){return this.half_heigth},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"WORLD_WIDTH",{get:function(){return this.world_width},set:function(t){this.world_width=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"WORLD_HEIGHT",{get:function(){return this.world_height},set:function(t){this.world_height=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"SCALE",{get:function(){return this.scale},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"WIN_SIZE",{get:function(){return cc.v2(this.GAME_WIDTH,this.GAME_HEIGHT)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"INV_WIN_SIZE",{get:function(){return cc.v2(1/this.GAME_WIDTH,1/this.GAME_HEIGHT)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"SIDE_RATIO",{get:function(){return Math.max(this.GAME_WIDTH,this.GAME_HEIGHT)/Math.min(this.GAME_WIDTH,this.GAME_HEIGHT)},enumerable:!1,configurable:!0}),t.prototype.updateSettings=function(){this.game_width=cc.winSize.width,this.game_height=cc.winSize.height,this.half_width=.5*this.GAME_WIDTH,this.half_heigth=.5*this.GAME_HEIGHT,this.is_landscape=this.GAME_WIDTH>this.GAME_HEIGHT,this.scale=this.calculateScale()},t.prototype.chooseDefaultHeight=function(){return this.IS_LANDSCAPE?this.DEFAULT_HEIGHT:this.DEFAULT_WIDTH},t.prototype.chooseDefaultWidth=function(){return this.IS_LANDSCAPE?this.DEFAULT_WIDTH:this.DEFAULT_HEIGHT},t.prototype.calculateScale=function(){var t=this.GAME_WIDTH/this.chooseDefaultWidth(),e=this.GAME_HEIGHT/this.chooseDefaultHeight();return Math.min(t,e)},t.instance=void 0,e=n([i("Settings")],t)}());o.default=s,cc._RF.pop()},{}],SimpleTransformComponent:[function(t,e,o){"use strict";cc._RF.push(e,"31cc1y4eJJM1Kgr8qXViEkR","SimpleTransformComponent");var n=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,i=r.ccclass,s=r.property,c=function(){function t(){this._isActive=!1,this.configuration=null}return Object.defineProperty(t.prototype,"isActive",{get:function(){return this._isActive},set:function(t){this._isActive=t,this.reset(t)},enumerable:!1,configurable:!0}),t.prototype.disable=function(){this.isActive=!1},t.prototype.enable=function(){this.isActive=!0},t.prototype.getData=function(){var t=this.configuration?this.configuration.getData():null;return{isActive:this.isActive,config:t}},t.prototype.applyData=function(t){t&&(this.isActive=t.isActive,t.config&&this.configuration&&this.configuration.applyData(t.config))},n([s({visible:!1})],t.prototype,"_isActive",void 0),n([s()],t.prototype,"isActive",null),n([i("SimpleTransformComponent")],t)}();o.default=c,cc._RF.pop()},{}],SizeComponent:[function(t,e,o){"use strict";cc._RF.push(e,"e41cb7x+sRFnIMJaht+U8jZ","SizeComponent");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Base/SimpleTransformComponent"),c=cc._decorator,a=c.ccclass,l=c.property,u=function(){function t(){this.size=cc.size(1,1)}return t.prototype.applyTransform=function(t){t.width=this.size.width,t.height=this.size.height},t.prototype.getData=function(){return{size:this.size.clone()}},t.prototype.applyData=function(t){this.size=t.size},i([l(cc.Size)],t.prototype,"size",void 0),i([a("SizeConfiguration")],t)}(),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.configuration=null,e}return r(e,t),e.prototype.execute=function(t){this.configuration&&this.configuration.applyTransform(t)},e.prototype.reset=function(t){this.configuration=t?new u:null},i([l({type:u,serializable:!0,visible:function(){return this.isActive}})],e.prototype,"configuration",void 0),i([a("SizeComponent")],e)}(s.default);o.default=p,cc._RF.pop()},{"../Base/SimpleTransformComponent":"SimpleTransformComponent"}],TileAreaDestroy:[function(t,e,o){"use strict";cc._RF.push(e,"4c522OI3odItqFGTp0NKxCx","TileAreaDestroy");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.TileAreaConfig=void 0;var s=t("./Tile"),c=t("./TileConstants"),a=cc._decorator,l=a.ccclass,u=a.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.typeDestroy=c.AreaDestroy.Default,e.radius=5,e}return r(e,t),i([u({type:cc.Enum(c.AreaDestroy)})],e.prototype,"typeDestroy",void 0),i([u(cc.Integer)],e.prototype,"radius",void 0),i([l("TileAreaConfig")],e)}(s.TileConfig);o.TileAreaConfig=p;var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.config=null,e}return r(e,t),e.prototype.init=function(t){this.config.spriteFrame=t.spriteFrame,this.tileRenderer.setSpriteFrame(t.spriteFrame),this.config.typeDestroy=t.typeDestroy,this.config.radius=t.radius},i([u({type:p,override:!0})],e.prototype,"config",void 0),i([l],e)}(s.default);o.default=f,cc._RF.pop()},{"./Tile":"Tile","./TileConstants":"TileConstants"}],TileColorDestroy:[function(t,e,o){"use strict";cc._RF.push(e,"c40a0q7MmlNTLt2wGCVV1Lr","TileColorDestroy");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.TileColorConfig=void 0;var s=t("./Tile"),c=t("./TileConstants"),a=cc._decorator,l=a.ccclass,u=a.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.typeDestroy=c.ColorDestroy.Red,e.matchCount=2,e}return r(e,t),i([u({type:cc.Enum(c.ColorDestroy)})],e.prototype,"typeDestroy",void 0),i([u({type:cc.Integer})],e.prototype,"matchCount",void 0),i([l("TileColorConfig")],e)}(s.TileConfig);o.TileColorConfig=p;var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.config=null,e}return r(e,t),e.prototype.init=function(t){this.config.spriteFrame=t.spriteFrame,this.tileRenderer.setSpriteFrame(t.spriteFrame),this.config.typeDestroy=t.typeDestroy,this.config.matchCount=t.matchCount},i([u({type:p,override:!0})],e.prototype,"config",void 0),i([l],e)}(s.default);o.default=f,cc._RF.pop()},{"./Tile":"Tile","./TileConstants":"TileConstants"}],TileConstants:[function(t,e,o){"use strict";cc._RF.push(e,"d6b68Yp0OxIlLdf8IKXeIra","TileConstants"),Object.defineProperty(o,"__esModule",{value:!0}),o.TileAbilityTypes=o.AreaDestroy=o.LineDestroy=o.ColorDestroy=void 0,function(t){t[t.Red=0]="Red",t[t.Green=1]="Green",t[t.Blue=2]="Blue",t[t.Purple=3]="Purple",t[t.Yellow=4]="Yellow"}(o.ColorDestroy||(o.ColorDestroy={})),function(t){t[t.Vertical=0]="Vertical",t[t.Horizontal=1]="Horizontal"}(o.LineDestroy||(o.LineDestroy={})),function(t){t[t.Default=0]="Default",t[t.All=1]="All"}(o.AreaDestroy||(o.AreaDestroy={})),function(t){t[t.ColorDestroy=0]="ColorDestroy",t[t.LineDestroy=1]="LineDestroy",t[t.AreaDestroy=2]="AreaDestroy"}(o.TileAbilityTypes||(o.TileAbilityTypes={})),cc._RF.pop()},{}],TileLineDestroy:[function(t,e,o){"use strict";cc._RF.push(e,"18ed7uuL0BIe6iItQ8aMm29","TileLineDestroy");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.TileLineConfig=void 0;var s=t("./Tile"),c=t("./TileConstants"),a=cc._decorator,l=a.ccclass,u=a.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.typeDestroy=c.LineDestroy.Vertical,e}return r(e,t),i([u({type:cc.Enum(c.LineDestroy)})],e.prototype,"typeDestroy",void 0),i([l("TileLineConfig")],e)}(s.TileConfig);o.TileLineConfig=p;var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.config=null,e}return r(e,t),e.prototype.init=function(t){this.config.spriteFrame=t.spriteFrame,this.tileRenderer.setSpriteFrame(t.spriteFrame),this.config.typeDestroy=t.typeDestroy},i([u({type:p,override:!0})],e.prototype,"config",void 0),i([l],e)}(s.default);o.default=f,cc._RF.pop()},{"./Tile":"Tile","./TileConstants":"TileConstants"}],TileRenderer:[function(t,e,o){"use strict";cc._RF.push(e,"2f153MBS7FGc74KLQsSNcqR","TileRenderer");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{a(n.next(t))}catch(e){i(e)}}function c(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,c)}a((n=n.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return a([t,e])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a,l,u=t("../Enums/EasingType"),p=t("../Plugins/Utilities"),f=cc._decorator,h=f.ccclass,d=f.property;(function(t){t.Show="tile_show",t.Hide="tile_hide",t.Focus="tile_focus",t.CantMatching="tile_cant_matching",t.Swap="tile_swap"})(a||(a={})),function(t){t.Swap="tile_swap_mid"}(l||(l={}));var y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.renderer=null,e.animation=null,e.moveTween=null,e.swapPos=cc.Vec2.ZERO,e}return r(e,t),e.prototype.onLoad=function(){this.animation=this.node.getComponent(cc.Animation)},e.prototype.reset=function(){this.renderer.node.scale=.001},e.prototype.setScale=function(t){this.node.scale=t},e.prototype.setSpriteFrame=function(t){this.renderer.spriteFrame=t},e.prototype.show=function(t){void 0===t&&(t=!0),t?this.animation.play(a.Show):this.renderer.node.scale=1},e.prototype.hide=function(){return s(this,void 0,Promise,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.playAnimation(a.Hide)];case 1:return t.sent(),[2]}})})},e.prototype.playFocusAnim=function(){return s(this,void 0,Promise,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.playAnimation(a.Focus)];case 1:return t.sent(),[2]}})})},e.prototype.playSwapAnim=function(t){return s(this,void 0,Promise,function(){return c(this,function(e){switch(e.label){case 0:return this.swapPos=t.clone(),[4,this.playAnimation(a.Swap)];case 1:return e.sent(),[2]}})})},e.prototype.playCantMatching=function(){return s(this,void 0,Promise,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.playAnimation(a.CantMatching)];case 1:return t.sent(),[2]}})})},e.prototype.setPosition=function(t){this.node.setPosition(t)},e.prototype.getPosition=function(){return new cc.Vec2(this.node.x,this.node.y)},e.prototype.moveTo=function(t,e,o){void 0===o&&(o=u.default.linear),this.moveTween&&this.moveTween.stop(),this.moveTween=new cc.Tween(this.node).to(e,{position:p.default.convertToVec3(t)},{easing:cc.easing[u.default[o]]}).start()},e.prototype.playAnimation=function(t){return s(this,void 0,Promise,function(){var e=this;return c(this,function(){return[2,new Promise(function(o){e.animation.play(t),e.animation.once(cc.Animation.EventType.FINISHED,function(){return o()})})]})})},e.prototype.animationEventHandler=function(t){switch(t){case l.Swap:default:this.swapPos&&this.setPosition(this.swapPos)}},i([d(cc.Sprite)],e.prototype,"renderer",void 0),i([h()],e)}(cc.Component);o.default=y,cc._RF.pop()},{"../Enums/EasingType":"EasingType","../Plugins/Utilities":"Utilities"}],TilesCreator:[function(t,e,o){"use strict";cc._RF.push(e,"d7d2c0M2OJKYqHGNy3ZPQfN","TilesCreator");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Enums/Events"),c=t("../Plugins/Utilities"),a=t("./TileAreaDestroy"),l=t("./TileColorDestroy"),u=t("./TileConstants"),p=t("./TileLineDestroy"),f=t("./TilesPool"),h=cc._decorator,d=h.ccclass,y=h.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tileColorPrefab=null,e.tileLinePrefab=null,e.tileAreaPrefab=null,e.tileColorConig=[],e.tileLineConig=[],e.tileAreaConig=[],e}return r(e,t),e.prototype.init=function(t,e,o){this.tileAreaConig.forEach(function(t){t.radius=e.find(function(e){return e.typeDestroy===t.typeDestroy}).radius}),this.tileColorPool=new f.default(t,this.tileColorPrefab,"TileColorDestroy",o),this.tileLinePool=new f.default(t,this.tileLinePrefab,"TileLineDestroy"),this.tileAreaPool=new f.default(t,this.tileAreaPrefab,"TileAreaDestroy"),cc.systemEvent.on(s.default.TILE_REMOVED.toString(),this.tileRemove,this)},e.prototype.getTileColorDestroy=function(t,e){void 0===e&&(e=u.ColorDestroy.Blue);var o=this.tileColorPool.getTile();e=t?u.ColorDestroy[c.default.getRandomEnumKey(u.ColorDestroy)]:e;var n=this.tileColorConig.find(function(t){return t.typeDestroy===e});return o.init(n),o},e.prototype.getTileLineDestroy=function(t,e){void 0===e&&(e=u.LineDestroy.Horizontal);var o=this.tileLinePool.getTile();e=t?u.LineDestroy[c.default.getRandomEnumKey(u.LineDestroy)]:e;var n=this.tileLineConig.find(function(t){return t.typeDestroy===e});return o.init(n),o},e.prototype.getTileAreaDestroy=function(t,e){void 0===e&&(e=u.AreaDestroy.Default);var o=this.tileAreaPool.getTile();e=t?u.AreaDestroy[c.default.getRandomEnumKey(u.AreaDestroy)]:e;var n=this.tileAreaConig.find(function(t){return t.typeDestroy===e});return o.init(n),o},e.prototype.tileRemove=function(t){t instanceof l.default?this.tileColorPool.addTile(t):t instanceof p.default?this.tileLinePool.addTile(t):t instanceof a.default&&this.tileAreaPool.addTile(t)},i([y(cc.Prefab)],e.prototype,"tileColorPrefab",void 0),i([y(cc.Prefab)],e.prototype,"tileLinePrefab",void 0),i([y(cc.Prefab)],e.prototype,"tileAreaPrefab",void 0),i([y(l.TileColorConfig)],e.prototype,"tileColorConig",void 0),i([y(p.TileLineConfig)],e.prototype,"tileLineConig",void 0),i([y(a.TileAreaConfig)],e.prototype,"tileAreaConig",void 0),i([d],e)}(cc.Component);o.default=v,cc._RF.pop()},{"../Enums/Events":"Events","../Plugins/Utilities":"Utilities","./TileAreaDestroy":"TileAreaDestroy","./TileColorDestroy":"TileColorDestroy","./TileConstants":"TileConstants","./TileLineDestroy":"TileLineDestroy","./TilesPool":"TilesPool"}],TilesPool:[function(t,e,o){"use strict";cc._RF.push(e,"5b78bdF7BtNI6TZpLaTAEu2","TilesPool"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../Field/FieldUtils"),r=function(){function t(t,e,o,n,r){var i=this;void 0===n&&(n=10),void 0===r&&(r=new cc.Vec2(-5555,-5555)),this.pool=[],this.parentNode=t,this.prefab=e,this.componentName=o,this.defaulSize=n,this.defaultPos=r;for(var s=[],c=0;c<this.defaulSize;c++)s.push(this.getTile());s.forEach(function(t){return i.addTile(t)})}return t.prototype.getTile=function(){var t;if(this.pool.length>0)(t=this.pool.pop()).reset();else{var e=cc.instantiate(this.prefab);e.setParent(this.parentNode),(t=e.getComponent(this.componentName)).setPosition(this.defaultPos)}return n.default.instance&&t.setScale(n.default.instance.tileScale),t},t.prototype.addTile=function(t){t.setPosition(this.defaultPos),this.pool.push(t)},t}();o.default=r,cc._RF.pop()},{"../Field/FieldUtils":"FieldUtils"}],Tile:[function(t,e,o){"use strict";cc._RF.push(e,"338dfvcX4NERqcNNsdEpjW8","Tile");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{a(n.next(t))}catch(e){i(e)}}function c(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,c)}a((n=n.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return a([t,e])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(c){i=[6,c],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.TileConfig=void 0;var a=t("../Enums/Events"),l=t("./TileConstants"),u=t("./TileRenderer"),p=cc._decorator,f=p.ccclass,h=p.property,d=function(){function t(){this.ability=l.TileAbilityTypes.ColorDestroy,this.spriteFrame=null}return i([h({type:cc.Enum(l.TileAbilityTypes)})],t.prototype,"ability",void 0),i([h({type:cc.SpriteFrame})],t.prototype,"spriteFrame",void 0),i([f("TileConfig")],t)}();o.TileConfig=d;var y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.config=null,e.needMatch=!1,e.tileRenderer=null,e}return r(e,t),e.prototype.onLoad=function(){this.tileRenderer=this.node.getComponent(u.default),this.reset()},e.prototype.setScale=function(t){this.tileRenderer.setScale(t)},e.prototype.reset=function(){this.needMatch=!1,this.tileRenderer.reset()},e.prototype.setPosition=function(t){this.tileRenderer.setPosition(t)},e.prototype.getPosition=function(){return this.tileRenderer.getPosition()},e.prototype.fallDown=function(t,e,o){this.tileRenderer.moveTo(t,e,o)},e.prototype.remove=function(){return s(this,void 0,Promise,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.tileRenderer.hide()];case 1:return t.sent(),cc.systemEvent.emit(a.default.TILE_REMOVED.toString(),this),[2]}})})},e.prototype.show=function(t){void 0===t&&(t=!0),this.tileRenderer.show(t)},e.prototype.focus=function(){return s(this,void 0,Promise,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.tileRenderer.playFocusAnim()];case 1:return t.sent(),[2]}})})},e.prototype.cantMatching=function(){return s(this,void 0,Promise,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.tileRenderer.playCantMatching()];case 1:return t.sent(),[2]}})})},e.prototype.swap=function(t){return s(this,void 0,Promise,function(){return c(this,function(e){switch(e.label){case 0:return[4,this.tileRenderer.playSwapAnim(t)];case 1:return e.sent(),[2]}})})},i([h()],e.prototype,"config",void 0),i([f()],e)}(cc.Component);o.default=y,cc._RF.pop()},{"../Enums/Events":"Events","./TileConstants":"TileConstants","./TileRenderer":"TileRenderer"}],TransformComponent:[function(t,e,o){"use strict";cc._RF.push(e,"e52a9044wFPirYVk7hRJ6Sp","TransformComponent");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Settings"),c=t("../../Enums/Events"),a=t("./Accessories/TransformController"),l=cc._decorator,u=l.ccclass,p=l.property,f=l.menu,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.transformReference=null,e._isSameTransform=!0,e._isDependingOnSideRatio=!1,e.limitSideRatio=1.35,e.commonTransform=new a.default,e.commonTransformBelowSideRatio=new a.default,e.landscapeTransform=new a.default,e.landscapeTransformBelowSideRatio=new a.default,e.portraitTransform=new a.default,e.portraitTransformBelowSideRatio=new a.default,e.settings=new s.default,e}return r(e,t),Object.defineProperty(e.prototype,"isSameTransform",{get:function(){return this._isSameTransform},set:function(t){this._isSameTransform=t,this._isSameTransform?(this.commonTransform=this.landscapeTransform.clone(),this.landscapeTransform=null,this.portraitTransform=null):(this.landscapeTransform=this.commonTransform.clone(),this.portraitTransform=this.commonTransform.clone(),this.commonTransform=null)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isDependingOnSideRatio",{get:function(){return this._isDependingOnSideRatio},set:function(t){this._isDependingOnSideRatio=t,this.isDependingOnSideRatio?this.isSameTransform?this.commonTransformBelowSideRatio=this.commonTransform.clone():(this.portraitTransformBelowSideRatio=this.portraitTransform.clone(),this.landscapeTransformBelowSideRatio=this.landscapeTransform.clone()):(this.commonTransformBelowSideRatio=null,this.portraitTransformBelowSideRatio=null,this.landscapeTransformBelowSideRatio=null)},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.subscribeEvents(),this.commonTransform&&(this.commonTransform.transformReference=this.transformReference),this.commonTransformBelowSideRatio&&(this.commonTransformBelowSideRatio.transformReference=this.transformReference),this.landscapeTransform&&(this.landscapeTransform.transformReference=this.transformReference),this.landscapeTransformBelowSideRatio&&(this.landscapeTransformBelowSideRatio.transformReference=this.transformReference),this.portraitTransform&&(this.portraitTransform.transformReference=this.transformReference),this.portraitTransformBelowSideRatio&&(this.portraitTransformBelowSideRatio.transformReference=this.transformReference)},e.prototype.subscribeEvents=function(){cc.systemEvent.on(c.default.WINDOW_RESIZED.toString(),this.onSizeChanged,this)},e.prototype.getCurrentTransform=function(){var t=Math.max(this.settings.GAME_WIDTH,this.settings.GAME_HEIGHT)/Math.min(this.settings.GAME_WIDTH,this.settings.GAME_HEIGHT),e=this.isDependingOnSideRatio&&t<this.limitSideRatio;return this.isSameTransform?e?this.commonTransformBelowSideRatio:this.commonTransform:this.settings.IS_LANDSCAPE?e?this.landscapeTransformBelowSideRatio:this.landscapeTransform:e?this.portraitTransformBelowSideRatio:this.portraitTransform},e.prototype.onSizeChanged=function(){this.getCurrentTransform().setNodeTransform(this.node)},e.prototype.onEnable=function(){this.onSizeChanged()},i([p(cc.Node)],e.prototype,"transformReference",void 0),i([p],e.prototype,"_isSameTransform",void 0),i([p],e.prototype,"isSameTransform",null),i([p],e.prototype,"_isDependingOnSideRatio",void 0),i([p],e.prototype,"isDependingOnSideRatio",null),i([p({visible:function(){return this.isDependingOnSideRatio}})],e.prototype,"limitSideRatio",void 0),i([p({type:a.default,visible:function(){return this.isSameTransform}})],e.prototype,"commonTransform",void 0),i([p({type:a.default,visible:function(){return this.isSameTransform&&this.isDependingOnSideRatio}})],e.prototype,"commonTransformBelowSideRatio",void 0),i([p({type:a.default,visible:function(){return!this.isSameTransform}})],e.prototype,"landscapeTransform",void 0),i([p({type:a.default,visible:function(){return!this.isSameTransform&&this.isDependingOnSideRatio}})],e.prototype,"landscapeTransformBelowSideRatio",void 0),i([p({type:a.default,visible:function(){return!this.isSameTransform}})],e.prototype,"portraitTransform",void 0),i([p({type:a.default,visible:function(){return!this.isSameTransform&&this.isDependingOnSideRatio}})],e.prototype,"portraitTransformBelowSideRatio",void 0),i([u,f("Transform/TransformComponent")],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../../Enums/Events":"Events","../Settings":"Settings","./Accessories/TransformController":"TransformController"}],TransformController:[function(t,e,o){"use strict";cc._RF.push(e,"153c5/hx9dFobfHRVqfAtKR","TransformController");var n=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r,i=t("./Components/AnchorComponent"),s=t("./Components/PositionComponent"),c=t("./Components/RotationComponent"),a=t("./Components/ScaleComponent"),l=t("./Components/SizeComponent");(function(t){t[t.Position=0]="Position",t[t.Scale=1]="Scale",t[t.Rotation=2]="Rotation",t[t.Anchor=4]="Anchor",t[t.Size=5]="Size",t[t.All=6]="All",t[t.Hide=7]="Hide"})(r||(r={}));var u=cc._decorator,p=u.ccclass,f=u.property,h=function(){function t(){this.changeValueType=r.Hide,this.positionComponent=new s.default,this.scaleComponent=new a.default,this.rotationComponent=new c.default,this.anchorComponent=new i.default,this.sizeComponent=new l.default,this._transformReference=null}var e;return e=t,Object.defineProperty(t.prototype,"transformReference",{get:function(){return this._transformReference},set:function(t){this._transformReference=t},enumerable:!1,configurable:!0}),t.prototype.setNodeTransform=function(t){this.rotationComponent.execute(t,this.transformReference),this.positionComponent.execute(t,this.transformReference),this.sizeComponent.execute(t,this.transformReference),this.anchorComponent.execute(t,this.transformReference),this.scaleComponent.execute(t,this.transformReference)},t.prototype.clone=function(){var t=new e;return t.rotationComponent.applyData(this.rotationComponent.getData()),t.positionComponent.applyData(this.positionComponent.getData()),t.sizeComponent.applyData(this.sizeComponent.getData()),t.anchorComponent.applyData(this.anchorComponent.getData()),t.scaleComponent.applyData(this.scaleComponent.getData()),t.changeValueType=this.changeValueType,t.transformReference=this.transformReference,t},t.prototype.isPreferredTypeSelected=function(t){return this.changeValueType===t||this.changeValueType===r.All},n([f({type:cc.Enum(r)})],t.prototype,"changeValueType",void 0),n([f({type:s.default,visible:function(){return this.isPreferredTypeSelected(r.Position)}})],t.prototype,"positionComponent",void 0),n([f({type:a.default,visible:function(){return this.isPreferredTypeSelected(r.Scale)}})],t.prototype,"scaleComponent",void 0),n([f({type:c.default,visible:function(){return this.isPreferredTypeSelected(r.Rotation)}})],t.prototype,"rotationComponent",void 0),n([f({type:i.default,visible:function(){return this.isPreferredTypeSelected(r.Anchor)}})],t.prototype,"anchorComponent",void 0),n([f({type:l.default,visible:function(){return this.isPreferredTypeSelected(r.Size)}})],t.prototype,"sizeComponent",void 0),e=n([p("TransformController")],t)}();o.default=h,cc._RF.pop()},{"./Components/AnchorComponent":"AnchorComponent","./Components/PositionComponent":"PositionComponent","./Components/RotationComponent":"RotationComponent","./Components/ScaleComponent":"ScaleComponent","./Components/SizeComponent":"SizeComponent"}],Utilities:[function(t,e,o){"use strict";cc._RF.push(e,"3fc8cyNHQ5Kyrr/O8WhujHw","Utilities"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){}return t.randomItem=function(t){return t[Math.floor(Math.random()*t.length)]},t.getRandomInt=function(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t},t.getRandomFloat=function(t,e){return Math.random()*(e-t+1)+t},t.clamp=function(t,e,o){return Math.min(Math.max(t,e),o)},t.getRandomElementFromArray=function(t){return t[this.getRandomInt(0,t.length-1)]},t.convertToVec3=function(t,e,o){return t instanceof cc.Vec2?new cc.Vec3(t.x,t.y):new cc.Vec3(t,e||0,o||0)},t.getEnumKeys=function(t){var e=[];for(var o in t)e.push(o);return e},t.getRandomEnumKey=function(e){return t.getRandomElementFromArray(t.getEnumKeys(e))},t.multiplySizeByScalar=function(t,e){return new cc.Size(t.width*e,t.height*e)},t}();o.default=n,cc._RF.pop()},{}],VisibilityComponent:[function(t,e,o){"use strict";cc._RF.push(e,"02ee6M/bFNF3puvuFs35koF","VisibilityComponent");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Base/SimpleTransformComponent"),c=cc._decorator,a=c.ccclass,l=c.property,u=function(){function t(){this.opacity=255,this.color=cc.color(255,255,255,255)}return t.prototype.applyTransform=function(t){t.opacity=this.opacity,t.color=this.color},t.prototype.getData=function(){return{opacity:this.opacity,color:this.color.clone()}},t.prototype.applyData=function(t){this.opacity=t.opacity,this.color=t.color},i([l(cc.Float)],t.prototype,"opacity",void 0),i([l(cc.Color)],t.prototype,"color",void 0),i([a("VisibilityConfiguration")],t)}(),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.configuration=null,e}return r(e,t),e.prototype.execute=function(t,e){this.configuration&&this.configuration.applyTransform(t,e)},e.prototype.reset=function(t){this.configuration=t?new u:null},i([l({type:u,serializable:!0,visible:function(){return this.isActive}})],e.prototype,"configuration",void 0),i([a("VisibilityComponent")],e)}(s.default);o.default=p,cc._RF.pop()},{"../Base/SimpleTransformComponent":"SimpleTransformComponent"}]},{},["Booster","BoosterConfig","BoosterInput","BoosterManager","BoosterRenderer","BoosterTypes","IBooster","IBoosterInput","IBoosterManager","IBoosterPayload","IBoosterRenderer","EasingType","Events","SceneNames","Field","FieldCreator","FieldInput","FieldState","FieldStateAreaDestroy","FieldStateCreation","FieldStateDestroyByColor","FieldStateFallTiles","FieldStateLineDestroy","FieldStateMixTiles","FieldStateSwap","FiledStateWaiting","IFiledState","FieldUtils","GameManager","LevelBoosterConfig","LevelConfig","LevelManager","LevelTileConfig","InputCatcher","InputManager","InputManagerData","InputSources","InputTypes","Settings","IConfiguration","SimpleTransformComponent","AnchorComponent","PositionComponent","RotationComponent","ScaleComponent","SizeComponent","VisibilityComponent","TransformController","TransformComponent","Utilities","ScoreStorage","Tile","TileAreaDestroy","TileColorDestroy","TileConstants","TileLineDestroy","TileRenderer","TilesCreator","TilesPool","Button","Counter","CounterRenderer","ICounterInitData","MainMenu","MainMenuRenderer","PauseMenu","PauseMenuRenderer","IProgressBarInitData","ProgressBar","ProgressBarRenderer","IResultData","ResultMenu","ResultMenuRenderer"]);
//# sourceMappingURL=index.js.map
